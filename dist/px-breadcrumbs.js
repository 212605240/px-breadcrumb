'use strict';(function(){Polymer({is:'px-breadcrumbs',properties:{breadcrumbData:{type:Array,value:function value(){return[]}},_mainPathItems:{type:Array,value:function value(){return[]}},_clickPathItem:{type:Object,value:function value(){return{}}},_clickedItemChildren:{type:Array,value:function value(){return[]}},_isDropdownHidden:{type:Boolean,value:true},_selectedItem:{type:Object,value:function value(){return{}}}},observers:['prepareData(breadcrumbData.*, _selectedItem)'],prepareData:function prepareData(){var _this=this;this._calculatePath().then(function(obj){return _this._fixLongAssetNames(obj)}).then(function(pathArray){_this.set('_mainPathItems',pathArray)})},_isTextShorteningNecessery:function _isTextShorteningNecessery(pathArray){console.log('pathArray');console.log(pathArray)},_fixLongAssetNames:function _fixLongAssetNames(pathArray){var _this2=this;return new Promise(function(accept,reject){for(var i=0,len=pathArray.length;i<len;i++){if(pathArray[i].text.length>16){_this2._returnShortenString(pathArray[i]).then(function(obj){var path=obj.path,shortenedString=obj.text;path.text=shortenedString})}if(pathArray[i].children){_this2._fixLongAssetNames(pathArray[i].children)}}return accept(pathArray)})},_returnShortenString:function _returnShortenString(pathItem){return new Promise(function(accept,reject){var string=pathItem.text,beginning=string.substring(0,6),middle='...',end=string.substring(string.length-6);return accept({'text':beginning+middle+end,'path':pathItem})})},_normalizePathClickTarget:function _normalizePathClickTarget(evt){return evt.target._iconsetName==='fa'?evt.target.parentNode.parentNode:evt.target},_resetSelectedItem:function _resetSelectedItem(){this._selectedItem.selectedItem=false},_calculatePath:function _calculatePath(){var _this3=this;return new Promise(function(fulfill,reject){var pathArray=[],currentDataObj=_this3.breadcrumbData,self=_this3,foundSelectedItem=false;var recursiveLoopThroughObj=function recursiveLoopThroughObj(pathItem){for(var i=0,len=pathItem.length;i<len;i++){if(foundSelectedItem){break};if(pathItem[i].selectedItem){pathArray.push(pathItem[i]);self.set('_selectedItem',pathItem[i]);foundSelectedItem=true;break}if(pathItem[i].children){pathArray.push(pathItem[i]);recursiveLoopThroughObj(pathItem[i].children)}}};recursiveLoopThroughObj(currentDataObj);return fulfill(pathArray)})},_doesItemHaveChildren:function _doesItemHaveChildren(itemInPath){return itemInPath.hasChildren},_isNotLastItemInData:function _isNotLastItemInData(index){return this._mainPathItems.length-1!==index},_calculatePathclass:function _calculatePathclass(index){return!this._isNotLastItemInData(index)?' selected':''},_dropdownTap:function _dropdownTap(evt){this._resetSelectedItem();console.log(evt);var newSelectItem=evt.model.item;this._setSelectedItem(newSelectItem);this.set('_isDropdownHidden',true);this.set('_clickPathItem',{})},_setSelectedItem:function _setSelectedItem(selectedItem){selectedItem.selectedItem=true;this.set('_selectedItem',selectedItem);console.log(selectedItem)},_onPathTap:function _onPathTap(evt){console.log('path click');var dataItem=evt.model.item;if(evt.model.item.selectedItem){evt.stopPropagation();return}if(this._clickPathItem===dataItem){console.log('this._clickPathItem === evt.model.item');this.set('_isDropdownHidden',true);this.set('_clickPathItem',{})}else{console.log('else');this.set('_clickPathItem',dataItem);this.set('_isDropdownHidden',false);this._changeDropdownPosition(evt)}if(this._doesItemHaveChildren(dataItem)){this.set('_clickedItemChildren',dataItem.children)}},extractClickedPathItemPosition:function extractClickedPathItemPosition(clickedItem){},_changeDropdownPosition:function _changeDropdownPosition(evt){var normalizedTarget=this._normalizePathClickTarget(evt),targetRect=normalizedTarget.getBoundingClientRect(),targetLeft=targetRect.left,targetBottom=targetRect.bottom,targetHeight=targetRect.height,windowScrollX=window.scrollX,windowScrollY=window.scrollY,dropdown=Polymer.dom(this.root).querySelector('.breadCrumbdropdown');console.log(targetRect);dropdown.style.top=targetBottom+windowScrollY+4+'px';dropdown.style.left=targetLeft+windowScrollX+'px'},_notifyClick:function _notifyClick(item){this.dispatchEvent(new CustomEvent('px-breadcrumbs-item-clicked',{item:item,composed:true}))}})})();
//# sourceMappingURL=px-breadcrumbs.js.map
