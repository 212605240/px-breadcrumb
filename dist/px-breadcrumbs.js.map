{"version":3,"sources":["px-breadcrumbs.es6.js"],"names":["Polymer","is","properties","breadcrumbData","type","Array","value","_mainPathItems","_clickPathItem","Object","_clickedItemChildren","_isDropdownHidden","Boolean","_selectedItem","observers","prepareData","_calculatePath","then","pathArray","_breadcrumbsDisplayOptions","set","_calculateSizeOfBreadcrumbs","strArray","accumulativeSizeOfBreadcrumbs","ctx","_createCanvas","i","length","parseInt","measureText","text","width","children","Promise","accept","reject","accumulativeSizeOfAllBreadcrumbs","dom","flush","async","breadcrumbs","document","querySelector","breadcrumbsContainer","root","breadcrumbsUlContainer","bcUlContainerRect","getBoundingClientRect","ulWidth","allButTheLastItem","_shortenLongAssetNames","slice","sizeOfAllButLastItem","lastItem","shortenAllItems","sizeOfAllShortenedItem","shortenAllItemsWithOverflow","overflowArray","removedItem","shift","console","log","push","overflowObj","unshift","canvas","createElement","height","_measurementCanvas","getContext","font","_isTextShorteningNecessery","len","_returnShortenString","obj","path","shortenedString","pathItem","string","beginning","substring","middle","end","_normalizePathClickTarget","evt","target","_iconsetName","parentNode","_resetSelectedItem","currentDataObj","self","foundSelectedItem","recursiveLoopThroughObj","selectedItem","_doesItemHaveChildren","itemInPath","hasChildren","_isNotLastItemInData","index","_calculatePathclass","_dropdownTap","newSelectItem","model","item","_setSelectedItem","_onPathTap","dataItem","stopPropagation","_changeDropdownPosition","normalizedTarget","targetRect","targetLeft","left","targetBottom","bottom","targetHeight","windowScrollX","window","scrollX","windowScrollY","scrollY","dropdown","style","top","_notifyClick","dispatchEvent","CustomEvent","composed"],"mappings":"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","file":"px-breadcrumbs.js","sourcesContent":["(function() {\n  Polymer({\n\n    is: 'px-breadcrumbs', \n\n    properties: {\n      /**\n       * This array receives/holds the data that will be transformed into the breadcrumbs.\n       */\n      breadcrumbData: {\n        type: Array,\n        value: function() {return [];}\n      },\n      _mainPathItems: {\n        type: Array,\n        value: function() {return [];}\n      },\n      _clickPathItem: {\n        type: Object,\n        value: function() {return {};}\n      },\n      _clickedItemChildren: {\n        type: Array,\n        value: function() {return [];},\n        \n      },\n      _isDropdownHidden: {\n        type: Boolean,\n        value: true\n      },\n      _selectedItem: {\n        type: Object,\n        value: function() {return {};}\n      }\n    },\n    // attached() {\n    //   this.prepareData();\n    // },\n    observers: ['prepareData(_selectedItem)'],\n    /**\n     * This method has a chain of promises that process the data as needed.\n     */\n    prepareData() {\n      this._calculatePath()\n      .then((pathArray) => this._breadcrumbsDisplayOptions(pathArray))\n      .then((pathArray) => {\n        this.set('_mainPathItems', pathArray);\n      });\n    },\n    _calculateSizeOfBreadcrumbs(strArray) {\n      \n      if (strArray) {\n        var accumulativeSizeOfBreadcrumbs = 0,\n        ctx = this._createCanvas();\n        for (var i=0; i<strArray.length;i++) {\n          accumulativeSizeOfBreadcrumbs += parseInt(ctx.measureText(strArray[i].text).width,10);\n          //if the item has children, we need to the size of the down chevron.\n          if (strArray[i].children) {\n            accumulativeSizeOfBreadcrumbs += 11;\n          }\n          //we need to also add 15 pixels for the angle right\n          if (i !==strArray.length -1) {\n            accumulativeSizeOfBreadcrumbs += 15;\n          }\n        }\n        return accumulativeSizeOfBreadcrumbs;\n      } else {\n        return 0;\n      }\n    },\n    /* \n    * in this method, we decide on the display options for the breadcrumbs. \n    * we have the following options:\n    * 1. we can shorten all but the last one, and see if they fit\n    * 2. we can shorten all including the last one and see if they fit\n    * 3. we can shorten all of them, and include the overflow at the beginning of the array.\n    * @param {array} strArray an array of objects, which contains the breadcrumbs\n    */\n    _breadcrumbsDisplayOptions(strArray) {\n      return new Promise((accept, reject) => {\n        var ctx = this._createCanvas(),\n          accumulativeSizeOfAllBreadcrumbs = this._calculateSizeOfBreadcrumbs(strArray);\n          Polymer.dom.flush();\n          this.async(() => {\n            var breadcrumbs = document.querySelector('px-breadcrumbs'),\n                breadcrumbsContainer = Polymer.dom(breadcrumbs.root).querySelector('.container'),\n                breadcrumbsUlContainer = Polymer.dom(breadcrumbsContainer).querySelector('ul'),\n                bcUlContainerRect = breadcrumbsContainer.getBoundingClientRect(),\n                ulWidth = bcUlContainerRect.width;\n                \n            // we check to see if the container (which is sized automatically to fill out the page)\n            // can fit all the items in the breadcrumbs.\n            if (ulWidth < accumulativeSizeOfAllBreadcrumbs) {\n              \n              var allButTheLastItem = this._shortenLongAssetNames(strArray.slice(0, strArray.length-1)),\n                  sizeOfAllButLastItem = this._calculateSizeOfBreadcrumbs(allButTheLastItem),\n                  lastItem = this._calculateSizeOfBreadcrumbs(strArray.slice(-1));\n              \n              //we want to find out if the container can now fit all of the shortened items + the last Item, that wasn't shortened\n              if (ulWidth < sizeOfAllButLastItem + lastItem) {\n                //it doesn't fit, so, we go to second option.\n              \n                var shortenAllItems = this._shortenLongAssetNames(strArray),\n                    sizeOfAllShortenedItem = this._calculateSizeOfBreadcrumbs(shortenAllItems);\n                \n                //we check if we can fit after we've shortened all the items\n                if (ulWidth < sizeOfAllShortenedItem) {\n                  \n                  //looks like we can't fit them, even after shortening them all. \n                  //time for option 3.\n                  //i'm setting a random high number to start with\n                  var shortenAllItemsWithOverflow = 99999,\n                      overflowArray = [],\n                      removedItem;\n                  //keep looping until all the items fit into the container\n                  while (ulWidth < shortenAllItemsWithOverflow) {\n                    //we remove the first item - mutating strArray, and returning the item\n                    //which then gets pushed into overflowArray, giving us an array of the items we\n                    //had to cut out once this loop is done.\n                    removedItem = strArray.shift();\n                    console.log(removedItem);\n                    overflowArray.push(removedItem);\n                    shortenAllItemsWithOverflow = this._calculateSizeOfBreadcrumbs(strArray);\n                  }\n                  var overflowObj = {\n                    \"text\": \"...\",\n                    \"children\": overflowArray\n                  }\n                  \n                  //this pushes the overflowObj to the beginning of the array.\n                  strArray.unshift(overflowObj);\n                  console.log('shorten everything, include overflow');\n                  return accept(strArray);\n                \n              } else {\n                  console.log('shorten everything fits');\n                  //we can fit all the breadcrumbs once we've shortened them.\n                  return accept(shortenAllItems);\n                }\n              } else {\n                //shortening everything but the last one works, so we \n                //re-add the last item - unshortened - to the array , and return that.\n                var lastItem = strArray.slice(strArray.length-1);\n                if (allButTheLastItem) {\n                  allButTheLastItem.push(lastItem[0]);\n                }\n                console.log('shorten everything but the last one.');\n                return accept(allButTheLastItem);\n              }\n            } else {\n              //everything fits, no need to shorten anything\n              console.log('everything fits off the bat');\n              return accept(strArray);\n            }\n          }, 1500);\n          \n      });\n    },\n    _createCanvas() {\n      var canvas = document.createElement('canvas');\n      canvas.height = 20;\n      canvas.width = 9999;\n      this._measurementCanvas = canvas;\n      var ctx = this._measurementCanvas.getContext('2d');\n      ctx.font = \"15px GE Inspira Sans\";\n      return ctx;\n    },\n    _isTextShorteningNecessery(pathArray) {\n      console.log('pathArray');\n      console.log(pathArray);\n    },\n    /**\n     * This method accepts the path array, and loops through it recursively\n     * looking for anything with more than 16 characters.\n     * \n     * once it finds a long asset name, it shortens it.\n     * @param {Object} pathArray \n     * @return {Promise} PathArray \n     */\n    _shortenLongAssetNames(pathArray) {\n        //loop through each item\n        for (var i=0, len = pathArray.length; i<len;i++) {\n          //looking for anything that's over 16 characters.\n          if (pathArray[i].text.length > 16) {\n            //get the shotened version of the text\n            this._returnShortenString(pathArray[i])\n            .then((obj) => {\n              //and save it into the correct path.\n              var path = obj.path,\n                  shortenedString = obj.text;\n              path.text = shortenedString;\n            });\n          } else {\n            //make sure to search through the children as well by calling this recursively\n            if (pathArray[i].children) {\n              this._shortenLongAssetNames(pathArray[i].children);\n            }\n            debugger;\n            //once we're done, return the promise with the modified pathArray\n            return pathArray;\n          }\n      }\n    },\n    /**\n     * This method accepts an obj that has more than 16 characters in its text, and \n     * returns the shortened version of that text.\n     * @param {Obj} pathItem \n     * @return {Promise} shortenedString\n     */\n    _returnShortenString(pathItem) {\n      return new Promise((accept, reject) => {\n        var string = pathItem.text,\n        beginning = string.substring(0,6),\n        middle = \"...\",\n        end = string.substring(string.length-6);\n      \n        return accept({\"text\": beginning + middle + end, \"path\": pathItem});\n      });\n      \n    },\n    /**\n     * This method is used to determine where the path click came from - we have 3 different options, \n     * 1. the text\n     * 2. the down chevron\n     * 3. The side chevron\n     * but we really want the encompossing LI, regardless of what was clicked. \n     * the two icons have a _iconsetName property that is 'fa' so we use that to determine if they were clicked, \n     * and if so, grab their parent, which is the LI.\n     * @param {*} evt the event generated by the user tap\n     */\n    _normalizePathClickTarget(evt) {\n      return (evt.target._iconsetName === 'fa') ? evt.target.parentNode.parentNode : evt.target;\n    },\n    /**\n     * This method resets the existing _selectedItem\n     */\n    _resetSelectedItem() {\n      this.set('_selectedItem', false);\n    },\n    /**\n     * This method is called on load, to calculate the initial Path, \n     * everytime a breadcrumb is clicked.\n     * it recursively builds the path, while looking for the \n     * selectedItem.\n     */\n    _calculatePath() {\n      return new Promise((accept, reject) => {\n        var pathArray = [],\n        currentDataObj = this.breadcrumbData,\n        self = this,\n        foundSelectedItem = false;\n        var recursiveLoopThroughObj = function(pathItem) {\n          for (var i=0, len = pathItem.length; i<len;i++) {\n            if (foundSelectedItem) {\n              break;\n            };\n\n            if (pathItem[i].selectedItem) {\n                pathArray.push(pathItem[i]);\n                self.set('_selectedItem', pathItem[i]);\n                foundSelectedItem = true;\n                break;\n              }\n\n            if (pathItem[i].children) {\n              //if it has children, we want to keep digging in\n              //so we push the item we are on into the pathArray\n              //and call ourselves with the children of the current item\n              pathArray.push(pathItem[i]);\n              recursiveLoopThroughObj(pathItem[i].children)\n            }\n          }\n        };\n\n        //the initial call into the recursion\n        recursiveLoopThroughObj(currentDataObj);\n\n        //once all the recursion is done, we can return the pathArray\n        return accept(pathArray);\n      });\n    },\n   \n    /**\n     * This function checks whether the item in question has children.\n     * @param {*} itemInPath \n     */\n    _doesItemHaveChildren(itemInPath) {\n      return itemInPath.hasChildren;\n    },\n    /**\n     * This function is used to determine whether we are on the last Item in the array. - if \n     * the index is the last item in the aray (length -1), we return false.\n     * @param {*} index \n     */\n    _isNotLastItemInData(index) {\n      return this._mainPathItems.length-1 !== index;\n    },\n    /**\n     * This function is used to determine the correct classes that need to be passed in - if \n     * the index is the last item in the aray, we want it to be bold, so we pass the selected class.\n     * \n     * @param {*} index This represents the index of the item we are looking at in the array.\n     */\n    _calculatePathclass(index) {\n      return !this._isNotLastItemInData(index) ?  ' selected' : '';\n    },\n    /**\n     * this method call a reset on whatever selected Item we \n     * previously had, and call a set on the new selectedItem \n     * @param {*} evt the click event from the dropdown item clicked\n     */\n    _dropdownTap(evt) {\n      this._resetSelectedItem();\n      var newSelectItem = evt.model.item;\n      this._setSelectedItem(newSelectItem);\n      //this hides the dropdown\n      this.set('_isDropdownHidden', true);\n      //and this clears out the field that hold the previously clicked\n      //path item.\n      this.set('_clickPathItem', {});\n    },\n    /**\n     * This method sets a _selectedItem from the passed object.\n     * @param {Object} selectedItem the new selected item\n     */\n    _setSelectedItem(selectedItem) {\n      selectedItem.selectedItem = true;\n      this.set('_selectedItem', selectedItem);\n    },\n    _onPathTap(evt) {\n      var dataItem = evt.model.item;\n\n      /* on tap, we need to find out if the clicked item is the same as before.\n      * if it is, we make the dropdown go way.\n      * if it is not, we save the new clicked item.\n      */\n\n      // if the selected item (the one at the end of the breadcrumb) has been clicked, ignore it.\n      if (evt.model.item.selectedItem) {\n        evt.stopPropagation();\n        return;\n      }\n      if (this._clickPathItem === dataItem) {\n        this.set('_isDropdownHidden', true);\n        this.set('_clickPathItem', {});\n      } else {\n        this.set('_clickPathItem', dataItem);\n        this.set('_isDropdownHidden', false);\n        this._changeDropdownPosition(evt);\n      }\n      \n      if (this._doesItemHaveChildren(dataItem)) {\n        this.set('_clickedItemChildren', dataItem.children);\n      }\n    },\n    /**\n     * @param {Object} positioning an object which holds the new positioning for the dropdown\n     */\n    _changeDropdownPosition(evt) {\n      var normalizedTarget = this._normalizePathClickTarget(evt),\n          targetRect = normalizedTarget.getBoundingClientRect(),\n          targetLeft = targetRect.left,\n          targetBottom = targetRect.bottom,\n          targetHeight = targetRect.height,\n          windowScrollX = window.scrollX,\n          windowScrollY = window.scrollY,\n          dropdown = Polymer.dom(this.root).querySelector('.breadCrumbdropdown');\n      \n      dropdown.style.top = (targetBottom + windowScrollY + 4) + 'px';\n      dropdown.style.left = targetLeft + windowScrollX + 'px';\n    },\n    /**\n     * This method dispatches a custom event ('px-breadcrumbs-item-clicked') that has the item attached to it.\n     * the 'composed: true' property makes it so the event passes through shadow dom boundaries.\n     * @param {*} item the item that was clicked on.\n     */\n    _notifyClick(item) {\n      this.dispatchEvent(new CustomEvent('px-breadcrumbs-item-clicked', {item: item, composed: true}));\n    }\n  });\n})();\n"]}