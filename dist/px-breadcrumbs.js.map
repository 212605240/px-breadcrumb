{"version":3,"sources":["px-breadcrumbs.es6.js"],"names":["Polymer","is","properties","breadcrumbData","type","Array","value","_mainPathItems","readOnly","_clickPathItem","Object","_clickedItemChildren","_isDropdownHidden","Boolean","_selectedItem","_ulWidth","Number","_selectedItemPath","clickOnlyMode","filterMode","behaviors","IronResizableBehavior","listeners","observers","attached","document","addEventListener","_onCaptureClick","bind","detached","removeEventListener","evt","filteredPathList","path","filter","evtPathItem","nodeName","length","_closeDropdown","_calculatePathItemClass","pathItem","source","_calculatePath","selectedItem","graph","_set_selectedItemPath","getPathToItem","_onResize","set","_getContainerSize","debounce","window","requestAnimationFrame","breadcrumbsContainer","dom","root","querySelector","breadcrumbsUlContainer","bcUlContainerRect","getBoundingClientRect","width","_rebuildBreadcrumbsDisplayOptions","itemPath","breadcrumbsObj","Breadcrumbs","sizeOfFullBreadcrumbs","_set_mainPathItems","sizeOfAllShortenedItemsExcludingLastItem","sizeOfFullLastItem","strArrayShortenedWithFullLastItem","allShortenedItemsExcludingLast","concat","lastItemFull","sizeOfAllShortenedItems","strArrayShortened","shortenedItems","_createArrayWithOverflow","strArray","pointer","currentAccumSize","sizeOfEllipsis","noRoomForFullLastItem","lastItem","overflowObj","slicedStrArray","removedSize","sizeOfIndividualShortItem","children","slice","lastItemShort","_isNotFirstItemInData","index","_normalizePathClickTarget","target","_iconsetName","parentNode","prepareData","breadcrumbsData","Graph","_doesItemHaveSiblings","itemInPath","isItemOverflow","text","hasSiblings","_dropdownTap","newSelectItem","model","item","_changePathFromClick","fire","_resetFilter","_calculateDropdownItemClass","highlighted","_onPathTap","dataItem","isClickedItemOverflow","siblings","getSiblings","map","sibling","_changeDropdownPosition","normalizedTarget","targetRect","targetLeft","left","targetBottom","bottom","targetHeight","height","windowScrollX","scrollX","windowScrollY","scrollY","dropdown","style","top","_notifyClick","composed","_filterInputChange","val","filteredSiblings","indexOf","_isFilteredMode","_isClickOnlyMode","breadcrumbs","WeakMap","ctx","_createCanvas","_preShortenItems","cachedItem","get","items","_getShortenedText","shortText","substr","fullSize","parseInt","measureText","shortSize","useFullSize","accum","i","len","sizeOfItem","_sizeOfIndividualFullItem","canvas","createElement","getContext","font","__sizeOfFullBreadcrumbs","_calculateSizeOfBreadcrumbs","__shortenedItems","wrapper","isTruncated","hasChildren","nodes","_crawlGraph","recursiveLoopThroughObj","parent","metaData","call","selectedItemPath","undefined"],"mappings":"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","file":"px-breadcrumbs.js","sourcesContent":["(function() {\n  Polymer({\n\n    is: 'px-breadcrumbs', \n\n    properties: {\n      /**\n       * This array receives/holds the data that will be transformed into the breadcrumbs.\n       */\n      breadcrumbData: {\n        type: Array,\n        value: function() {return [];}\n      },\n      /**\n       * This property holds the dynamically generated items (full or shortened, depending on the display options) that are used for the dom repeat,\n       * which draws the main path items. It is read only and can ONLY be changed by the _rebuildBreadcrumbsDisplayOptions function to make sure it's not changed anywhere else.\n       */\n      _mainPathItems: {\n        type: Array,\n        value: function() {return [];},\n        readOnly: true\n      },\n      /**\n       * This property holds the latest clicked top path item.\n       */\n      _clickPathItem: {\n        type: Object,\n        value: function() {return {};}\n      },\n      /**\n       * This property holds all the items that are to be shown in the dropdown - these are usually siblings, \n       * but can be children if the item is an overflow item.\n       */\n      _clickedItemChildren: {\n        type: Array,\n        value: function() {return [];},\n      },\n      /**\n       * This Property is used to determine whether the dropdown is hidden or shown.\n       */\n      _isDropdownHidden: {\n        type: Boolean,\n        value: true\n      },\n      /**\n       * This property holds the currently selectedItem. We start out with no value to avoid have it run through an empty object.\n       */\n      _selectedItem: {\n        type: Object\n      },\n      /**\n       * This property holds the size of the container, against which we make all of our calculations in \n       * breadcrumbs display options.\n       * The value is auto generated either on page load, or on page resize.\n       */\n      _ulWidth: {\n        type: Number,\n        value: 0\n      },\n      /**\n       * This property holds the path to the currently selected item.\n       * This is generated dynamically by the graph whenever the _selectedItem prop changes.\n       * It is readOnly to ensure that nothing but 1 process changes it.\n       */\n      _selectedItemPath: {\n        type: Array,\n        value: function() {return [];},\n        readOnly: true\n      },\n      /**\n       * Use this mode if you want a more traditional breadcrumb path, and don't want the dropdowns to show up when a path item is clicked.\n       */\n      clickOnlyMode: {\n        type: Boolean,\n        value: false\n      },\n      filterMode: {\n        type: Boolean,\n        value: false\n      }\n    },\n    behaviors: [Polymer.IronResizableBehavior],\n    listeners: {\n      'iron-resize': '_onResize'\n    },\n    observers: [\n      '_calculatePath(_selectedItem)', \n      '_rebuildBreadcrumbsDisplayOptions(_selectedItemPath, _ulWidth)',\n      'prepareData(breadcrumbData)'\n      ],\n    attached() {\n      document.addEventListener('click', this._onCaptureClick.bind(this));\n    },\n    detached() {\n      document.removeEventListener('click', this._onCaptureClick.bind(this));\n    },\n    /**\n     * This method captures all clicks, and determines where they come from, and whether the dropdown needs to be closed.\n     * @param {Object} evt \n     */\n    _onCaptureClick(evt) {\n      //we look through the path to see if the click came anywhere from inside our component by filtering anything that isn't PX-BREADCRUMBS\n      var filteredPathList =  evt.path.filter((evtPathItem) => {\n        return evtPathItem.nodeName === \"PX-BREADCRUMBS\";\n      });\n      \n      //then we check to see if the length is empty - if it is, that means the click did NOT come from inside our component, which makes it an outside click.\n      if (!filteredPathList.length){\n        //if it's an outside click and the dropdown is open, we want to close it.\n        if (!this._isDropdownHidden) {\n          this._closeDropdown();\n        }\n      }\n    },\n    /**\n     * This method checks whether the item that was passed in is the same one that is registered as the clicked one, and \n     * if so, returns the 'opened' class.\n     * @param {Object} pathItem the item we are checking the class for\n     */\n    _calculatePathItemClass(pathItem) {\n      pathItem = pathItem.source ? pathItem.source : pathItem;\n      return (this._clickPathItem === pathItem) ? 'opened': '';\n    },\n    /**\n     * This method is called automatically whenever the user changes the _selectedItem, or on initial page load, when we find the \n     * initial _selectedItem.\n     * it ends up setting up the value of the readonly property _selectedItemPath from the graph.\n     * @param {Object} selectedItem the item that was either clicked on, or passed in as a selectedItem from the beginning.\n     */\n    _calculatePath(selectedItem) {\n      var graph = this.graph;\n      this._set_selectedItemPath(graph.getPathToItem(selectedItem));\n    },\n    /**\n     * This method is called by iron-resize. It hides/clears out the dropdown menu, and gets the container size to start the display options process.\n     */\n    _onResize() {\n      this.set('_isDropdownHidden', true);\n      this.set('_clickPathItem', {});\n      this.set('_clickedItemChildren', []);\n      this._getContainerSize();\n    },\n    /**\n     * This method is called on initial page load, and on every page resize\n     * to find the width of the container after a draw. we have an observer on _ulWidth that rebuilds the display options automatically.\n     */\n    _getContainerSize() {\n      this.debounce('windowResize', () => {\n        window.requestAnimationFrame(() => {\n          var breadcrumbsContainer = Polymer.dom(this.root).querySelector('.container'),\n              breadcrumbsUlContainer = Polymer.dom(breadcrumbsContainer).querySelector('ul'),\n              bcUlContainerRect = breadcrumbsContainer.getBoundingClientRect();\n\n          this.set('_ulWidth', bcUlContainerRect.width + 4); //the 4 is for the padding (2px on each side) on the ul.\n        });\n      },10);\n      \n    },\n    /* \n    * in this method, we decide on the display options for the breadcrumbs. \n    * we have the following options:\n    * 1. nothing needs to be shortened.\n    * 2. we can shorten all but the last one\n    * 2. we can shorten all including the last one\n    * 3. we can shorten all of them, and include the overflow at the beginning of the array. the last one is NOT shortened by default, but can be shortened as needed.\n    * @param {array} strArray an array of objects, which contains the breadcrumbs\n    */\n    _rebuildBreadcrumbsDisplayOptions() {\n\n      var itemPath = this._selectedItemPath || [],\n          graph = this.graph,\n          _ulWidth = this._ulWidth;\n\n      if (!itemPath.length || !graph || !_ulWidth) return;\n\n      var breadcrumbsObj = new Breadcrumbs(itemPath, graph);\n\n        /*\n        * option 1 \n        * we check to see if the container (which is sized automatically to fill out the page)\n        * can fit all the items in the breadcrumbs.\n        * the first option is the simpliest one - everything just fits, but if it doesn't fit...\n        */\n        if (_ulWidth > breadcrumbsObj.sizeOfFullBreadcrumbs) {\n          //everything fits, no need to shorten anything\n          this._set_mainPathItems(itemPath);\n          return;\n        }\n\n        /*\n        * option 2\n        * we want to find out if the container can now fit all the \n        * shortened items + the last Item that wasn't shortened\n        */\n        if (_ulWidth > breadcrumbsObj.sizeOfAllShortenedItemsExcludingLastItem + breadcrumbsObj.sizeOfFullLastItem) {\n          \n          let strArrayShortenedWithFullLastItem = breadcrumbsObj.allShortenedItemsExcludingLast.concat(breadcrumbsObj.lastItemFull);\n          this._set_mainPathItems(strArrayShortenedWithFullLastItem);\n          return;\n        }\n\n        /*\n        * option 3 \n        * we check if we can fit after we've shortened all the items \n        */\n        if (_ulWidth > breadcrumbsObj.sizeOfAllShortenedItems) {\n          let strArrayShortened = breadcrumbsObj.shortenedItems;\n          \n          this._set_mainPathItems(strArrayShortened);\n          return;\n        }\n\n        /*\n        * option 4\n        * we have to create an array with overflow.\n        * we only get to this if non of the if statements above are true.\n        */\n      \n        this._set_mainPathItems(this._createArrayWithOverflow(itemPath, _ulWidth, breadcrumbsObj));\n\n    },\n    /*\n    * this method is called once we've established that we need to have an\n    * array with overflow.\n    * we keep removing the size of items - starting from the beginning of the array - \n    * from the total size of all the items, until we can fit everything + the last item that isn't shortened\n    * into the container.\n    * @param {Array} strArray the array that holds the breadcrumbs\n    * @param {number} _ulWidth the width of the ul container\n    */\n    _createArrayWithOverflow(strArray, _ulWidth, breadcrumbsObj) {\n      \n      var pointer = 0,\n          currentAccumSize = breadcrumbsObj.sizeOfAllShortenedItemsExcludingLastItem,\n          sizeOfFullLastItem = breadcrumbsObj.sizeOfFullLastItem,\n          sizeOfEllipsis = breadcrumbsObj.sizeOfEllipsis,\n          noRoomForFullLastItem = false,\n          lastItem = {},\n          overflowObj = {\"text\": \"...\", \"hasChildren\": true},\n          slicedStrArray = [];\n\n      //keep looping until all the items fit into the container\n      while (_ulWidth < sizeOfEllipsis + currentAccumSize + sizeOfFullLastItem) {\n        //if we made it to the last item, and it's STILL can't fit, break out of the \n        // while loop, to ensure the last items doesn't go into the overflow object.\n        if (pointer === strArray.length-1) {\n          noRoomForFullLastItem = true;\n          break\n        }\n        //get the size of the item we are placing into the overflow\n        var removedSize = breadcrumbsObj.sizeOfIndividualShortItem(strArray[pointer]);\n        // subtract the size from the overall accumulated size\n        currentAccumSize -= removedSize;\n        //and make sure to manually change our pointer.\n        pointer++;\n      }\n      \n      \n\n      //create the overflow object, and populate its children with the shortened strings (if necessary)\n      overflowObj.children = strArray.slice(0, pointer);\n\n      //the last item is usually full size, but, if if it's just the overflow and the last item\n      // and the last item is too long, it should shortened.\n      lastItem  = (noRoomForFullLastItem) ? breadcrumbsObj.lastItemShort : breadcrumbsObj.lastItemFull;\n      \n      //add the overflow obj to the beginning of the array, and follow it up with all the shortened strings, \n      //starting with the point we stopped at with the pointer, and going till the last item, which is dynamically determined.\n      slicedStrArray = [overflowObj].concat(breadcrumbsObj.shortenedItems.slice(pointer, strArray.length-1)).concat(lastItem);\n      \n      return slicedStrArray;\n\n    },\n    /**\n     * This function is used to determine whether we are on the first Item in the array - used by a dom-if to check \n     * if we should display the right angle (yes on all but the first one)\n     * @param {Number} index the index of the item\n     */\n    _isNotFirstItemInData(index) {\n      return index !== 0;\n    },\n\n    /**\n     * This method is used to determine where the path click came from - we have 3 different options, \n     * 1. the text\n     * 2. the down chevron\n     * 3. The side chevron\n     * but we really want the encompossing LI, regardless of what was clicked. \n     * the two icons have a _iconsetName property that is 'fa' so we use that to determine if they were clicked, \n     * and if so, grab their parent, which is the LI.\n     * @param {*} evt the event generated by the user tap\n     */\n    _normalizePathClickTarget(evt) {\n      return (evt.target._iconsetName === 'fa') ? evt.target.parentNode.parentNode : evt.target;\n    },\n    /**\n     *  \n     * This method is called whenever breadcrumbsData is changed - which is either on load, \n     * or if the developer hands us an updated path. it is the ONLY thing that creates the graph \n     * and sets it on the component, as well as set the _selectedItem initially.\n     * @param {Object} breadcrumbsData a JS Object that holds the breadcrumbs data.\n     */\n    prepareData(breadcrumbsData) {\n        if (!breadcrumbsData.length) return;\n\n        var graph = new Graph(this.breadcrumbData, this);\n        \n        this.set('graph', graph);\n        this.set('_selectedItem', graph.selectedItem);\n    },\n    /**\n     * This function checks whether the item in question has siblings.\n     * if the item is an overflow item, we return a false, since it's not going to be in the graph anyway.\n     * @param {*} itemInPath \n     */\n    _doesItemHaveSiblings(itemInPath) {\n      var graph = this.graph,\n          source = itemInPath.source ? itemInPath.source : itemInPath,\n          isItemOverflow = itemInPath.text === '...' ? true : false;\n\n      return (!isItemOverflow)  ? graph.hasSiblings(source) : false;\n    },\n    /**\n     * \n     * we consider a dropdown tap an event that changes the path. \n     * We make sure to pass the correct item into the graph by using the source property,\n     * after we hide the dropdown and reset the last clicked item.\n     * \n     * @param {Object} evt the click event from the dropdown item clicked\n     */\n    _dropdownTap(evt) {\n      var newSelectItem = evt.model.item.source ? evt.model.item.source : evt.model.item;\n      //this._setSelectedItem(newSelectItem);\n      //this hides the dropdown\n      this._closeDropdown();\n      this._changePathFromClick(newSelectItem);\n    },\n    /**\n     * This event is fired whenever a click occurs - from a top path item, or dropdown item - \n     * that changes the context. The new context is attached as 'item' \n     * @event px-breadcrumbs-item-changed\n     */\n    /**\n     * This method sets the _selectedItem to the item that was clicked - whether from the main path items, or the dropdown items\n     * this is the only place we change _selectedItem on click.\n     */\n    _changePathFromClick(item) {\n      this.set('_selectedItem', item);\n      this.fire('px-breadcrumbs-item-changed', item);\n    },\n    _closeDropdown() {\n        this.set('_isDropdownHidden', true);\n        this.set('_clickedItemChildren', []);\n        this.set('_clickPathItem', {});\n        if (this.filterMode) this._resetFilter();\n    },\n    _resetFilter() {\n      Polymer.dom(this.root).querySelector('#filter').value = '';\n    },\n    _calculateDropdownItemClass(item) {\n      return (item.highlighted) ? 'highlighted' : '';\n    },\n    /* \n    * on tap, we need to find out if the clicked item is the same as before.\n    * if it is, we empty our the dropdown, hide it, and clear the _clickPathItem (the last item clicked).\n    * if it is not the same item that was previously clicked, we save the new clicked item into _clickPathItem\n    * set the siblings according to the item, show the dropdown and adjust the positioning for it.\n    * sometimes, a top path item has no siblings, at which point we treat the click like a dropdown click - which is to say\n    * we change the path accordingly.\n    */\n    _onPathTap(evt) {\n      var dataItem = evt.model.item.source ? evt.model.item.source : evt.model.item;\n      //if the click only mode is on, just change the path\n      if (this.clickOnlyMode) {\n        this._changePathFromClick(dataItem);\n        return;\n      }\n\n      //if the item that is clicked is the open option, hide the dropdown, and reset the _clickPathItem object.\n      if (this._clickPathItem === dataItem) {\n        this._closeDropdown();\n        return;\n      }\n\n      // it's important to check if the clicked item is an overflow item, since it's the only one\n      // that isn't in our graph - if we send it into getSiblings, the graph won't know what to do with it.\n      // instead, if it IS an overflow item, we set the siblings as the children of dataItem.\n      var isClickedItemOverflow = dataItem.text ==='...' ? true : false;\n\n      if (this._doesItemHaveSiblings(dataItem) || isClickedItemOverflow) {\n        var graph = this.graph,\n            siblings = !isClickedItemOverflow ? graph.getSiblings(dataItem) : dataItem.children;\n\n        siblings = siblings.map((sibling) => {\n          if (sibling === dataItem) {\n            sibling.highlighted = true;\n          }\n          return sibling;\n        });\n        this._resetFilter();\n        this.set('_clickedItemChildren', siblings);\n        this.set('_clickPathItem', dataItem);\n        this._changeDropdownPosition(evt);\n        this.set('_isDropdownHidden', false);\n        \n      // the clicked item has no siblings - we reset the contents of the dropdown\n      // and change the path accordingly.\n      } else {\n        this.set('_clickedItemChildren', []);\n        this._changePathFromClick(dataItem);\n      }\n    },\n    /**\n     * the dropdown is dynamically positioned - we find out the top and left of the clicked item,\n     * and position the dropdown accordingly.\n     * @param {Object} positioning an object which holds the new positioning for the dropdown\n     */\n    _changeDropdownPosition(evt) {\n      var normalizedTarget = this._normalizePathClickTarget(evt),\n          targetRect = normalizedTarget.getBoundingClientRect(),\n          targetLeft = targetRect.left,\n          targetBottom = targetRect.bottom,\n          targetHeight = targetRect.height,\n          windowScrollX = window.scrollX,\n          windowScrollY = window.scrollY,\n          dropdown = Polymer.dom(this.root).querySelector('.breadCrumbDropdown');\n      dropdown.style.top = (targetBottom + windowScrollY + 6) + 'px'; //remember to add the padding to push it down\n      dropdown.style.left = (targetLeft + windowScrollX - 10) + 'px'; //and rememeber to subtract the padding from the left\n    },\n    /**\n     * This method dispatches a custom event ('px-breadcrumbs-item-clicked') that has the item attached to it.\n     * the 'composed: true' property makes it so the event passes through shadow dom boundaries.\n     * @param {*} item the item that was clicked on.\n     */\n    _notifyClick(item) {\n      this.fire('px-breadcrumbs-item-clicked', {item: item, composed: true});\n    },\n    _filterInputChange(evt) {\n      this.debounce('filter', () => {\n        var val = evt.target.value,\n            graph = this.graph,\n            siblings = graph.getSiblings(this._clickPathItem),\n            filteredSiblings = [];\n        \n        //if anything was typed, filter out the items that don't contain the typed val\n        if (val.length) {\n          filteredSiblings = siblings.filter((sibling) => {\n            return sibling.text.indexOf(val) > -1;\n          });\n          if (filteredSiblings.length) {\n            this.set('_clickedItemChildren', filteredSiblings);\n          } else {\n            this.set('_clickedItemChildren', [{\"text\": \"No Results Found\"}]);\n          }\n          \n        } else {\n          this.set('_clickedItemChildren', siblings);\n        }        \n      },250);\n    },\n    _isFilteredMode() {\n      return this.filterMode;\n    },\n    _isClickOnlyMode() {\n      return this.clickOnlyMode;\n    }\n  });\n  \n  class Breadcrumbs {\n    constructor(breadcrumbs = [], graph) {\n      this.graph = graph;\n      this.breadcrumbs = breadcrumbs;\n      this.map = new WeakMap();\n      this.ctx = this._createCanvas();\n      this._preShortenItems(this.breadcrumbs);\n      return this;\n    }\n    \n    /**\n     * a getter that returns the size of the breadcrumb items - unshortened.\n     * it checks to see if it has a value, and if so, returns the cached one, so we don't have to calculate the value again.\n     */\n    get sizeOfFullBreadcrumbs() {\n      this.__sizeOfFullBreadcrumbs = this.__sizeOfFullBreadcrumbs || this._calculateSizeOfBreadcrumbs(this.breadcrumbs);\n      return this.__sizeOfFullBreadcrumbs;\n    }\n    /**\n     * a getter that returns the short size of the breadcrumb items excluding the last item. \n     */\n    get sizeOfAllShortenedItemsExcludingLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(0, this.breadcrumbs.length-1), false);\n    }\n    /**\n     * a getter that returns the size of the full last item\n     */\n    get sizeOfFullLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(-1));\n    }\n    /**\n     * a getter that returns the size of the short last item\n     */\n    get sizeOfShortLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(-1), false);\n    }\n    /**\n     * a getter that returns the last item in the breadcrumb array.\n     */\n    get lastItemFull() {\n      return this.breadcrumbs.slice(-1)[0];\n    }\n    /**\n     * a getter that returns the short version of the last item in the breadcrumbs array.\n     */\n    get lastItemShort() {\n      return this.shortenedItems.slice(-1)[0];\n    }\n    /**\n     * a getter that returns an array of all the shortened items in the breadcrumbs array \n     */\n    get shortenedItems() {\n      this.__shortenedItems = this.__shortenedItems ||  this.breadcrumbs.map((item) => {\n        var wrapper = {};\n        wrapper.source = item;\n        wrapper.isTruncated = true;\n        wrapper.text = this._getShortenedText(item);\n        wrapper.children = item.children;\n        wrapper.selectedItem = item.selectedItem;\n        wrapper.hasChildren = item.hasChildren;\n        return wrapper;\n      });\n      return this.__shortenedItems;\n    }\n    /**\n     * a getter that returns the size - in pixels - of the overflow ellipsis\n     */\n    get sizeOfEllipsis() {\n      return parseInt(this.ctx.measureText('...').width,10)\n    }\n    /**\n     * a getter that returns the size - in pixels - of all the shortened breadcrumbs items\n     */\n    get sizeOfAllShortenedItems() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs, false);\n    }\n    /**\n     * a getter that returns the size - in pixels - of all the shortened breadcrumbs items excluding the last item\n     */\n    get allShortenedItemsExcludingLast() {\n      return this.shortenedItems.slice(0, this.shortenedItems.length -1);\n    }\n    /**\n     * This method adds the item that is passed in to the weakMap if it is not already there.\n     * @param {Object} item an item from the breadcrumbs array that is being added to the weakMap\n     */\n    _addToWeakMap(item) {\n      const cachedItem = this.map.get(item) || null;\n      if (!cachedItem) {\n        this.map.set(item, item);  \n      }\n    }\n    /**\n     * This method is called when the class is instantiated. it loops through all the passed in items, and calls the _getShortenedText method on \n     * each item.\n     * @param {Array} items an array of breadcrumbs items \n     */\n    _preShortenItems(items) {\n      for (let item of items) {\n        this._getShortenedText(item);\n      }\n    }\n    /**\n     * This method returns the shortened version of the text in the item that is passed in, as well as add it into the map.\n     * it checks for a cached version before it sets it.\n     * @param {Object} item a breadcrumb Item\n     */\n    _getShortenedText(item) {\n      const cachedItem = this.map.get(item) || {};\n      cachedItem.shortText = cachedItem.shortText || `${item.text.substr(0,6)}...${item.text.substr(item.text.length-6)}`;\n      this.map.set(item, cachedItem);\n      return cachedItem.shortText;\n    }\n    /**\n     * \n     * This method returns the size - in pixels - of the full size of the text in the passed in item, as well as add that info into the map.\n     * it checks for a cached version before setting this value\n     * @param {Object} item a breadcrumb Item\n     */\n    _sizeOfIndividualFullItem(item) {\n      const cachedItem = this.map.get(item) || {};\n      cachedItem.fullSize = (cachedItem.fullSize || parseInt(this.ctx.measureText(item.text).width,10));\n      this.map.set(item, cachedItem);\n      return cachedItem.fullSize;\n    }\n    /**\n     * \n     * This method returns the size - in pixels - of the short size of the text in the passed in item, as well as add that info into the map.\n     * it checks for a cached version before setting this value\n     * @param {Object} item a breadcrumb Item\n     */\n    sizeOfIndividualShortItem(item) {\n      const cachedItem = this.map.get(item) || {};\n      cachedItem.shortSize = (cachedItem.shortSize || parseInt(this.ctx.measureText(cachedItem.shortText).width,10));\n      this.map.set(item, cachedItem);\n      return cachedItem.shortSize;\n    }\n    /**\n     * \n     * This method loops through the passed in array, and gets the size - in pixels - of all the items\n     * the size can be determined in either short or full text.\n     * it takes into account the size of the iron icons, as well as padding on each item, and padding on the container.\n     * \n     * @param {Array} strArray an array of the items we need the size calculated on.\n     * @param {Boolean} useFullSize this determines whether the full size is measured, or the short size.\n     */\n    _calculateSizeOfBreadcrumbs(strArray, useFullSize=true) {\n      if (strArray) {\n        let accum = 0,\n            i = 0,\n            len = strArray.length,\n            sizeOfItem;\n\n        for (i=0; i<len;i++,sizeOfItem=null) {\n          \n          if (useFullSize) {\n            sizeOfItem = this._sizeOfIndividualFullItem(strArray[i]);\n          } else {\n            sizeOfItem = this.sizeOfIndividualShortItem(strArray[i]);\n          }\n          var source = strArray[i].source ? strArray[i].source : strArray[i];\n          accum += sizeOfItem;\n          //if the item has siblings, we need to add the size of the down chevron.\n          if (strArray[i].text !== \"...\" && this.graph.hasSiblings(source)) {\n            accum += 15;\n          }\n          //padding on each item (10 on each side)\n          accum += 20;\n\n          //right angle arrow - the last item doesn't get a right angle.\n          if (i !== len-1){\n            accum += 15; \n          }\n        }\n        \n        return accum + 60;\n      }\n    }\n    /**\n     * This method creates/returns the canvas that we will use to measure the size of the text.\n     * we also set the font and font size.\n     */\n    _createCanvas() {\n      const canvas = document.createElement('canvas');\n      \n      canvas.height = 20;\n      canvas.width = 9999;\n\n      const ctx = canvas.getContext('2d');\n      ctx.font = \"15px GE Inspira Sans\";\n      return ctx;\n    }\n  };\n  \n  class Graph {\n    constructor(nodes) {\n      this.map = new WeakMap();\n      this._selectedItem = null;\n      this.graph = this._crawlGraph(nodes);\n      this.nodes = nodes;\n      return this;\n    }\n    /**\n     * This method is called when the class is instantiated. it loops through the nodes recursively, and add the metaData to each item\n     * as well as adds the node into the weakMap.\n     * \n     * @param {Array} nodes an array of breadcrumbs nodes\n     */\n    _crawlGraph(nodes) {\n      var recursiveLoopThroughObj = function(nodes, parent, path=[]) {\n          for (var i=0, len = nodes.length; i<len;i++) {\n          var metaData = {},\n            itemPath;\n\n            if (parent) {\n              metaData.parent = parent;\n            }\n            \n            if (nodes.length >1) {\n              metaData.siblings = nodes;\n            }\n                        \n            itemPath = path.concat([nodes[i]]);\n            \n            if (nodes[i].children) {\n              metaData.children = nodes[i].children;\n              //if it has children, we want to keep digging in\n              //and call ourselves with the children of the current item\n              recursiveLoopThroughObj.call(this,nodes[i].children, nodes[i], itemPath);\n            }\n\n            metaData.path = itemPath;\n            \n            if (nodes[i].selectedItem) {\n              this._selectedItem = nodes[i];\n\n              //add the parent and the selected item itself to the path\n              //metaData.path = path.concat(parent);\n            }\n            this.map.set(nodes[i], metaData);\n          }\n\n        }.bind(this);\n\n        //the initial call into the recursion\n        recursiveLoopThroughObj(nodes);\n    }\n    /**\n     * This getter returns the selectedItem\n     */\n    get selectedItem() {\n      return this._selectedItem;\n    }\n    /** \n     * this getter returns the selected Item's path.\n     */\n    get selectedItemPath() {\n      var metaData = this.map.get(this._selectedItem);\n      return (metaData) ? metaData.path : undefined;\n    }\n    /**\n     * This method is called when a new item is selected - it \n     * changes the selected Item on the graph, and returns the new selected item path.\n     * @param {Object} item the newly selected item\n     */\n    handleSelectedItem(item) {\n      this.selectedItem = item;\n      return this.selectedItemPath;\n    }\n    /**\n     * This method returns the path specified on an item.\n     * @param {Object} item \n     */\n    getPathToItem(item) {\n      var metaData = this.map.get(item);\n      return metaData.path;\n    }\n    /**\n     * This method returns whether or not the passed in item as any siblings.\n     * @param {Object} item \n     */\n    hasSiblings(item) {\n      var siblings = this.map.get(item).siblings;\n      return siblings && siblings.length >1;\n    }\n    /**\n     * This method returns the passed in item's siblings.\n     * @param {Object} item \n     */\n    getSiblings(item) {\n      var siblings = this.map.get(item).siblings;\n      return siblings;\n    }\n    /**\n     * This setter sets the selected Item on the Graph Map, as well as the selectedItem Property on the item itself.\n     */\n    set selectedItem(item) {\n      if (item) {\n        this._selectedItem.selectedItem = false;\n        item.selectedItem = true;\n        this._selectedItem = item;\n      }\n    }\n  }\n})();\n"]}