{"version":3,"sources":["px-breadcrumbs.es6.js"],"names":["Polymer","is","properties","breadcrumbData","type","Array","value","_mainPathItems","_clickPathItem","Object","_clickedItemChildren","_isDropdownHidden","Boolean","_selectedItem","ulWidth","Number","behaviors","IronResizableBehavior","listeners","observers","prepareData","_calculatePath","then","pathArray","_breadcrumbsDisplayOptions","set","_getContainerSize","window","requestAnimationFrame","breadcrumbs","document","querySelector","breadcrumbsContainer","dom","root","breadcrumbsUlContainer","bcUlContainerRect","getBoundingClientRect","width","RenderStatus","afterNextRender","strArray","Promise","accept","reject","breadcrumbsObj","Breadcrumbs","sizeOfFullBreadcrumbs","console","log","sizeOfAllShortenedItemsExcludingLastItem","sizeOfFullLastItem","strArrayShortenedWithFullLastItem","allShortenedItemsExcludingLast","concat","lastItemFull","sizeOfAllShortenedItems","strArrayShortened","shortenedItems","_createArrayWithOverflow","shortenAllItemsWithOverflow","pointer","removedItem","currentAccumSize","sizeOfEllipsis","removedAccumSize","noRoomForFullLastItem","lastItem","overflowObj","slicedStrArray","length","removedSize","sizeOfIndividualShortItem","children","slice","lastItemShort","_normalizePathClickTarget","evt","target","_iconsetName","parentNode","_resetSelectedItem","currentDataObj","self","foundSelectedItem","recursiveLoopThroughObj","pathItem","i","len","selectedItem","push","_doesItemHaveChildren","itemInPath","hasChildren","_isLastItemInData","index","_calculatePathclass","_dropdownTap","newSelectItem","model","item","_setSelectedItem","_changePathFromDropdownClick","_onPathTap","dataItem","stopPropagation","_changeDropdownPosition","normalizedTarget","targetRect","targetLeft","left","targetBottom","bottom","targetHeight","height","windowScrollX","scrollX","windowScrollY","scrollY","dropdown","style","top","_notifyClick","dispatchEvent","CustomEvent","composed","map","WeakMap","ctx","_createCanvas","_preShortenItems","items","_getShortenedText","cachedItem","get","shortText","text","substr","fullSize","parseInt","measureText","shortSize","useFullSize","accum","sizeOfItem","_sizeOfIndividualFullItem","canvas","createElement","getContext","font","__sizeOfFullBreadcrumbs","_calculateSizeOfBreadcrumbs","__shortenedItems","newItem"],"mappings":"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","file":"px-breadcrumbs.js","sourcesContent":["(function() {\n  Polymer({\n\n    is: 'px-breadcrumbs', \n\n    properties: {\n      /**\n       * This array receives/holds the data that will be transformed into the breadcrumbs.\n       */\n      breadcrumbData: {\n        type: Array,\n        value: function() {return [];}\n      },\n      _mainPathItems: {\n        type: Array,\n        value: function() {return [];}\n      },\n      _clickPathItem: {\n        type: Object,\n        value: function() {return {};}\n      },\n      _clickedItemChildren: {\n        type: Array,\n        value: function() {return [];},\n        \n      },\n      _isDropdownHidden: {\n        type: Boolean,\n        value: true\n      },\n      _selectedItem: {\n        type: Object\n      },\n      ulWidth: {\n        type: Number,\n        value: 0\n      }\n    },\n    behaviors: [Polymer.IronResizableBehavior],\n    listeners: {'iron-resize': '_getContainerSize'},\n    observers: ['prepareData(_selectedItem)'],\n    /**\n     * This method has a chain of promises that process the data as needed.\n     * first, we find the selected item inside _calculatePath\n     * secondly, we set the _mainPathItems\n     * thirdly, we figure out the display options - whether we need overflow, shorten any names, etc.\n     * lastly, we set the _mainPathItems again, this time with the shortened/overflow version, \n     * if necessary\n     */\n    prepareData() {\n      this._calculatePath()\n      .then((pathArray) => {\n        return this._breadcrumbsDisplayOptions(pathArray)})\n      .then((pathArray) => {\n        //and the second time this is being set, it's with the shortened versions, if necessary. \n        this.set('_mainPathItems', pathArray);\n      });\n    },\n    /**\n     * This method is called on initial page load, and on every page resize\n     * to find the width of the container after a draw, and queues\n     * the display options for the breadcrumbs for the next animation frame\n     * \n     */\n    _getContainerSize() {\n      window.requestAnimationFrame(() => {\n        var breadcrumbs = document.querySelector('px-breadcrumbs'),\n            breadcrumbsContainer = Polymer.dom(breadcrumbs.root).querySelector('.container'),\n            breadcrumbsUlContainer = Polymer.dom(breadcrumbsContainer).querySelector('ul'),\n            bcUlContainerRect = breadcrumbsContainer.getBoundingClientRect();\n\n        this.set('ulWidth', bcUlContainerRect.width + 4); //the 4 is for the padding (2px on each side) on the ul.\n      });\n\n      Polymer.RenderStatus.afterNextRender(this, () =>{\n        this.prepareData();\n      });\n    },\n    /* \n    * in this method, we decide on the display options for the breadcrumbs. \n    * we have the following options:\n    * 1. nothing needs to be shortened.\n    * 2. we can shorten all but the last one\n    * 2. we can shorten all including the last one\n    * 3. we can shorten all of them, and include the overflow at the beginning of the array. the last one is NOT shortened.\n    * @param {array} strArray an array of objects, which contains the breadcrumbs\n    */\n    _breadcrumbsDisplayOptions(strArray) {\n      return new Promise((accept, reject) => {\n        var breadcrumbsObj = new Breadcrumbs(strArray),\n            ulWidth = this.ulWidth;\n        /*\n        * option 1 \n        * we check to see if the container (which is sized automatically to fill out the page)\n        * can fit all the items in the breadcrumbs.\n        * the first option is the simpliest one - everything just fits, but if it doesn't fit...\n        */\n        if (ulWidth > breadcrumbsObj.sizeOfFullBreadcrumbs) {\n          //everything fits, no need to shorten anything\n          console.log('everything fits off the bat');\n          return accept(strArray);\n        }\n\n        /*\n        * option 2\n        * we want to find out if the container can now fit all of the \n        * shortened items + the last Item  that wasn't shortened\n        */\n        if (ulWidth > breadcrumbsObj.sizeOfAllShortenedItemsExcludingLastItem + breadcrumbsObj.sizeOfFullLastItem) {\n          console.log('shorten everything but the last one.');\n          var strArrayShortenedWithFullLastItem = breadcrumbsObj.allShortenedItemsExcludingLast.concat(breadcrumbsObj.lastItemFull);\n          return accept(strArrayShortenedWithFullLastItem);\n        }\n\n        /*\n        * option 3 \n        * we check if we can fit after we've shortened all the items \n        */\n        if (ulWidth > breadcrumbsObj.sizeOfAllShortenedItems) {\n          console.log('shorten everything fits');\n          var strArrayShortened = breadcrumbsObj.shortenedItems;\n          \n          return accept(strArrayShortened);\n        }\n\n        /*\n        * option 4\n        * we have to create an array with overflow.\n        * we only get to this if non of the if statements above are true.\n        */\n        \n        return accept(this._createArrayWithOverflow(strArray, ulWidth));\n      });\n    },\n    /*\n    * this method is called once we've established that we need to have an\n    * array with overflow.\n    * we keep removing the size of items - starting from the beginning of the array - \n    *  from the total size of all the items, until we can fit everything + the last item that isn't shortened\n    * into the container.\n    * @param {Array} strArray the array that holds the breadcrumbs\n    * @param {number} ulWidth the width of the ul container\n    */\n    _createArrayWithOverflow(strArray, ulWidth) {\n      return new Promise((accept, reject) => {\n      var shortenAllItemsWithOverflow = 99999,\n          pointer = 0,\n          removedItem,\n          breadcrumbsObj = new Breadcrumbs(strArray),\n          currentAccumSize = breadcrumbsObj.sizeOfAllShortenedItemsExcludingLastItem,\n          sizeOfFullLastItem = breadcrumbsObj.sizeOfFullLastItem,\n          sizeOfEllipsis = breadcrumbsObj.sizeOfEllipsis,\n          removedAccumSize = 0,\n          noRoomForFullLastItem = false,\n          lastItem = {},\n          overflowObj = {\"text\": \"...\"},\n          slicedStrArray = [];\n      //keep looping until all the items fit into the container\n      while (ulWidth < sizeOfEllipsis + currentAccumSize + sizeOfFullLastItem) {\n        if (pointer === strArray.length-1) {\n          noRoomForFullLastItem = true;\n          break\n        }\n        //get the size of the item we are placing into the overflow\n        var removedSize = breadcrumbsObj.sizeOfIndividualShortItem(strArray[pointer]);\n        // subtract the size from the overall accumulated size\n        currentAccumSize -= removedSize;\n        //and make sure to manually change our pointer.\n        pointer++;\n      }\n\n      //create the overflow object, and populate its children with the shortened strings (if necessary)\n      overflowObj.children = breadcrumbsObj.shortenedItems.slice(0, pointer);\n\n      //the last item is usually full size, but, if if it's just the overflow and the last item\n      // and the last item is too long, it should shortened.\n      lastItem  = (noRoomForFullLastItem) ? breadcrumbsObj.lastItemShort : breadcrumbsObj.lastItemFull;\n      \n      //add the overflow obj to the beginning of the array, and follow it up with all the shortened strings, \n      //starting with the point we stopped at with the pointer, and going till the last item, which is dynamically determined.\n      slicedStrArray = [overflowObj].concat(breadcrumbsObj.shortenedItems.slice(pointer, strArray.length-1)).concat(lastItem);\n      \n\n      console.log('shorten everything, include overflow');\n      return accept(slicedStrArray);\n      });\n    },\n    \n\n    /**\n     * This method is used to determine where the path click came from - we have 3 different options, \n     * 1. the text\n     * 2. the down chevron\n     * 3. The side chevron\n     * but we really want the encompossing LI, regardless of what was clicked. \n     * the two icons have a _iconsetName property that is 'fa' so we use that to determine if they were clicked, \n     * and if so, grab their parent, which is the LI.\n     * @param {*} evt the event generated by the user tap\n     */\n    _normalizePathClickTarget(evt) {\n      return (evt.target._iconsetName === 'fa') ? evt.target.parentNode.parentNode : evt.target;\n    },\n    /**\n     * This method resets the existing _selectedItem\n     */\n    _resetSelectedItem() {\n      this.set('_selectedItem', false);\n    },\n    /**\n     * This method is called on load, to calculate the initial Path, \n     * everytime a breadcrumb is clicked.\n     * it recursively builds the path, and returns it as a promise.\n     */\n    _calculatePath() {\n      return new Promise((accept, reject) => {\n        var pathArray = [],\n        currentDataObj = this.breadcrumbData,\n        self = this,\n        foundSelectedItem = false;\n        var recursiveLoopThroughObj = function(pathItem) {\n          for (var i=0, len = pathItem.length; i<len;i++) {\n            if (foundSelectedItem) {\n              break;\n            };\n\n            if (pathItem[i].selectedItem) {\n                pathArray.push(pathItem[i]);\n                foundSelectedItem = true;\n                break;\n              }\n\n            if (pathItem[i].children) {\n              //if it has children, we want to keep digging in\n              //so we push the item we are on into the pathArray\n              //and call ourselves with the children of the current item\n              pathArray.push(pathItem[i]);\n              recursiveLoopThroughObj(pathItem[i].children)\n            }\n          }\n        };\n\n        //the initial call into the recursion\n        recursiveLoopThroughObj(currentDataObj);\n\n        //once all the recursion is done, we can return the pathArray\n        return accept(pathArray);\n      });\n    },\n   \n    /**\n     * This function checks whether the item in question has children.\n     * @param {*} itemInPath \n     */\n    _doesItemHaveChildren(itemInPath) {\n      return (itemInPath && itemInPath.hasChildren);\n    },\n    /**\n     * This function is used to determine whether we are on the last Item in the array. - if \n     * the index is the last item in the aray (length -1), we return false.\n     * @param {Number} index the index of the item\n     */\n    _isLastItemInData(index) {\n      return this._mainPathItems[this._mainPathItems.length-1] === this._mainPathItems[index];\n    },\n    /**\n     * This function is used to determine the correct classes that need to be passed in - if \n     * the index is the last item in the aray, we want it to be bold, so we pass the selected class.\n     * \n     * @param {Number} index This represents the index of the item we are looking at in the array.\n     */\n    _calculatePathclass(index) {\n      return this._isLastItemInData(index) ? ' selected' : '';\n    },\n    /**\n     * this method calls a reset on whatever selected Item we \n     * previously had, and calls a set on the new selectedItem, as well as calls prepareData which determines \n     * how the breadcrumbs will show up.\n     * @param {Object} evt the click event from the dropdown item clicked\n     */\n    _dropdownTap(evt) {\n      this._resetSelectedItem();\n      var newSelectItem = evt.model.item;\n      this._setSelectedItem(newSelectItem);\n      //this hides the dropdown\n      this.set('_isDropdownHidden', true);\n      this._changePathFromDropdownClick();\n      //and this clears out the field that hold the previously clicked\n      //path item.\n      this.set('_clickPathItem', {});\n      \n    },\n    /**\n     * This method calls the prepareData method, which runs through the \n     */\n    _changePathFromDropdownClick() {\n      this.prepareData();\n    },\n    /**\n     * This method sets a _selectedItem from the passed object.\n     * @param {Object} selectedItem the new selected item\n     */\n    _setSelectedItem(selectedItem) {\n      selectedItem.selectedItem = true;\n      this.set('_selectedItem', selectedItem);\n    },\n    /* on tap, we need to find out if the clicked item is the same as before.\n    * if it is, we make the dropdown go way.\n    * if it is not, we save the new clicked item.\n    */\n    _onPathTap(evt) {\n      var dataItem = evt.model.item;\n\n      // if the selected item (the one at the end of the breadcrumb) has been clicked, ignore it.\n      if (evt.model.item.selectedItem) {\n        evt.stopPropagation();\n        return;\n      }\n      //if the item that is clicked is the open option, hide the dropdown, and reset the _clickPathItem object.\n      if (this._clickPathItem === dataItem) {\n        this.set('_isDropdownHidden', true);\n        this.set('_clickPathItem', {});\n      } else {\n        //new click on new item, set the clicked item, show the dropdown and set its position.\n        this.set('_clickPathItem', dataItem);\n        this.set('_isDropdownHidden', false);\n        this._changeDropdownPosition(evt);\n      }\n      if (this._doesItemHaveChildren(dataItem)) {\n        //dataItem.children = shortenedVersion(dataItem.children)\n        this.set('_clickedItemChildren', dataItem.children);\n      }\n    },\n    /**\n     * @param {Object} positioning an object which holds the new positioning for the dropdown\n     */\n    _changeDropdownPosition(evt) {\n      var normalizedTarget = this._normalizePathClickTarget(evt),\n          targetRect = normalizedTarget.getBoundingClientRect(),\n          targetLeft = targetRect.left,\n          targetBottom = targetRect.bottom,\n          targetHeight = targetRect.height,\n          windowScrollX = window.scrollX,\n          windowScrollY = window.scrollY,\n          dropdown = Polymer.dom(this.root).querySelector('.breadCrumbdropdown');\n      \n      dropdown.style.top = (targetBottom + windowScrollY + 4) + 'px';\n      dropdown.style.left = targetLeft + windowScrollX + 'px';\n    },\n    /**\n     * This method dispatches a custom event ('px-breadcrumbs-item-clicked') that has the item attached to it.\n     * the 'composed: true' property makes it so the event passes through shadow dom boundaries.\n     * @param {*} item the item that was clicked on.\n     */\n    _notifyClick(item) {\n      this.dispatchEvent(new CustomEvent('px-breadcrumbs-item-clicked', {item: item, composed: true}));\n    }\n  });\n  \n  class Breadcrumbs {\n    constructor(breadcrumbs) {\n      this.breadcrumbs = breadcrumbs;\n      this.map = new WeakMap();\n      this.ctx = this._createCanvas();\n      this._preShortenItems(this.breadcrumbs);\n      return this;\n    }\n    _preShortenItems(items) {\n      for (let item of items) {\n        this._getShortenedText(item);\n      }\n    }\n    get sizeOfFullBreadcrumbs() {\n      this.__sizeOfFullBreadcrumbs = this.__sizeOfFullBreadcrumbs || this._calculateSizeOfBreadcrumbs(this.breadcrumbs);\n      return this.__sizeOfFullBreadcrumbs;\n    }\n    get sizeOfAllShortenedItemsExcludingLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(0, this.breadcrumbs.length-1), false);\n    }\n    get sizeOfFullLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(-1));\n    }\n    get sizeOfShortLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(-1), false);\n    }\n    get lastItemFull() {\n      return this.breadcrumbs.slice(-1)[0];\n    }\n    get lastItemShort() {\n      return this.shortenedItems.slice(-1)[0];\n    }\n    get shortenedItems() {\n      \n      this.__shortenedItems = this.__shortenedItems ||  this.breadcrumbs.map((item) => {\n        var newItem = {};\n        newItem.text = this._getShortenedText(item);\n        newItem.children = item.children;\n        newItem.selectedItem = item.selectedItem;\n        newItem.hasChildren = item.hasChildren;\n        return newItem;\n      });\n      return this.__shortenedItems;\n    }\n    get sizeOfEllipsis() {\n      return parseInt(this.ctx.measureText('...').width,10)\n    }\n    get sizeOfAllShortenedItems() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs, false);\n    }\n    get allShortenedItemsExcludingLast() {\n      return this.shortenedItems.slice(0, this.shortenedItems.length -1);\n    }\n    get sizeOfAllShortenedItems() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs, false);\n    }\n    _getShortenedText(item) {\n      const cachedItem = this.map.get(item) || {};\n      cachedItem.shortText = cachedItem.shortText || `${item.text.substr(0,6)}...${item.text.substr(item.text.length-6)}`;\n      this.map.set(item, cachedItem);\n      return cachedItem.shortText;\n    }\n    _sizeOfIndividualFullItem(item) {\n      const cachedItem = this.map.get(item) || {};\n      cachedItem.fullSize = (cachedItem.fullSize || parseInt(this.ctx.measureText(item.text).width,10));\n      this.map.set(item, cachedItem);\n      return cachedItem.fullSize;\n    }\n    sizeOfIndividualShortItem(item) {\n      const cachedItem = this.map.get(item) || {};\n      cachedItem.shortSize = (cachedItem.shortSize || parseInt(this.ctx.measureText(cachedItem.shortText).width,10));\n      this.map.set(item, cachedItem);\n      return cachedItem.shortSize;\n    }\n    _calculateSizeOfBreadcrumbs(strArray, useFullSize=true) {\n      if (strArray) {\n        let accum = 0,\n            i = 0,\n            len = strArray.length,\n            sizeOfItem;\n\n        for (i=0; i<len;i++,sizeOfItem=null) {\n          \n          if (useFullSize) {\n            sizeOfItem = this._sizeOfIndividualFullItem(strArray[i]);\n          } else {\n            sizeOfItem = this.sizeOfIndividualShortItem(strArray[i]);\n          }\n\n          accum += sizeOfItem + 15; //the 15 is for the right angle.\n          \n          //if the item has children, we need to add the size of the down chevron.\n          if (strArray[i].children) {\n            accum += 11;\n          }\n        }\n        return accum;\n      }\n    }\n    _createCanvas() {\n      const canvas = document.createElement('canvas');\n      \n      canvas.height = 20;\n      canvas.width = 9999;\n\n      const ctx = canvas.getContext('2d');\n      ctx.font = \"15px GE Inspira Sans\";\n      return ctx;\n    }\n  }\n  \n\n})();\n"]}