{"version":3,"sources":["px-breadcrumbs.es6.js"],"names":["window","Polymer","is","behaviors","PxAppBehavior","AssetGraph","AssetSelectable","AssetActivatable","IronResizableBehavior","properties","_mainPathItems","type","Array","value","readOnly","_clickPathItem","Object","_clickedItemChildren","_isDropdownHidden","Boolean","_selectedItem","_ulWidth","Number","_selectedItemPath","clickOnlyMode","filterMode","_filterString","String","_hideNoResultLi","listeners","observers","attached","document","addEventListener","_onCaptureClick","bind","detached","removeEventListener","isDebouncerActive","cancelDebouncer","_onDomChange","dropdownListItemCount","dom","root","querySelector","renderedItemCount","set","_filterSiblings","toLowerCase","item","source","label","indexOf","evt","normalizedEvent","filteredPathList","path","filter","evtPathItem","nodeName","length","_closeDropdown","_calculatePathItemClass","pathItem","_onResize","_getContainerSize","debounce","requestAnimationFrame","breadcrumbsContainer","breadcrumbsUlContainer","bcUlContainerRect","getBoundingClientRect","width","_rebuildBreadcrumbsDisplayOptions","itemPath","graph","_assetGraph","breadcrumbsObj","pxBreadcrumbs","Breadcrumbs","sizeOfFullBreadcrumbs","_set_mainPathItems","sizeOfAllShortenedItemsExcludingLastItem","sizeOfFullLastItem","strArrayShortenedWithFullLastItem","allShortenedItemsExcludingLast","concat","lastItemFull","sizeOfAllShortenedItems","strArrayShortened","shortenedItems","_createArrayWithOverflow","strArray","pointer","currentAccumSize","sizeOfEllipsis","noRoomForFullLastItem","lastItem","overflowObj","slicedStrArray","removedSize","_sizeOfIndividualShortItem","children","slice","forEach","child","highlighted","lastItemShort","_isNotFirstItemInData","index","_normalizePathClickTarget","target","_iconsetName","parentNode","_onSelect","_set_selectedItemPath","detail","_doesItemHaveSiblings","itemInPath","isItemOverflow","hasSiblings","_dropdownTap","newSelectItem","model","_changePathFromClick","select","fire","_resetFilter","_calculateDropdownItemClass","_onPathTap","dataItem","isClickedItemOverflow","siblings","getSiblings","map","sibling","_changeDropdownPosition","normalizedTarget","targetRect","targetLeft","left","targetBottom","bottom","targetHeight","height","windowScrollX","scrollX","pageXOffset","windowScrollY","scrollY","pageYOffset","dropdown","style","cssText","_notifyClick","composed","_isFilteredMode","_isClickOnlyModeAndNotOverflow","breadcrumbs","WeakMap","ctx","_createCanvas","_preShortenItems","cachedItem","get","items","_getShortenedText","shortText","substr","fullSize","parseInt","measureText","shortSize","useFullSize","accum","i","len","sizeOfItem","_sizeOfIndividualFullItem","canvas","createElement","getContext","font","__sizeOfFullBreadcrumbs","_calculateSizeOfBreadcrumbs","__shortenedItems","wrapper","isTruncated","selectedItem","hasChildren"],"mappings":"wpBAAA,CAAC,SAASA,MAAT,CAAiB,CAChBC,QAAQ,CAENC,GAAI,gBAFE,CAINC,UAAW,CACTC,cAAcC,UADL,CAETD,cAAcE,eAFL,CAGTF,cAAcG,gBAHL,CAITN,QAAQO,qBAJC,CAJL,CAWNC,WAAY,CAKVC,eAAgB,CACdC,KAAMC,KADQ,CAEdC,MAAO,gBAAW,CAAC,MAAO,EAAI,CAFhB,CAGdC,SAAU,IAHI,CALN,CAaVC,eAAgB,CACdJ,KAAMK,MADQ,CAEdH,MAAO,gBAAW,CAAC,MAAO,EAAI,CAFhB,CAbN,CAqBVI,qBAAsB,CACpBN,KAAMC,KADc,CAEpBC,MAAO,gBAAW,CAAC,MAAO,EAAI,CAFV,CArBZ,CA4BVK,kBAAmB,CACjBP,KAAMQ,OADW,CAEjBN,MAAO,IAFU,CA5BT,CAmCVO,cAAe,CACbT,KAAMK,MADO,CAnCL,CA2CVK,SAAU,CACRV,KAAMW,MADE,CAERT,MAAO,CAFC,CA3CA,CAoDVU,kBAAmB,CACjBZ,KAAMC,KADW,CAEjBC,MAAO,gBAAW,CAAC,MAAO,EAAI,CAFb,CAGjBC,SAAU,IAHO,CApDT,CA4DVU,cAAe,CACbb,KAAMQ,OADO,CAEbN,MAAO,KAFM,CA5DL,CAgEVY,WAAY,CACVd,KAAMQ,OADI,CAEVN,MAAO,KAFG,CAhEF,CAoEVa,cAAe,CACbf,KAAMgB,MADO,CAEbd,MAAO,EAFM,CApEL,CAwEVe,gBAAiB,CACfjB,KAAMQ,OADS,CAEfN,MAAO,IAFQ,CAxEP,CAXN,CAyFNgB,UAAW,CACT,cAAe,WADN,CAET,wBAAyB,WAFhB,CAzFL,CA6FNC,UAAW,CACT,gEADS,CA7FL,CAgGNC,QAhGM,oBAgGK,CACTC,SAASC,gBAAT,CAA0B,OAA1B,CAAmC,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAnC,CACD,CAlGK,CAmGNC,QAnGM,oBAmGK,CACTJ,SAASK,mBAAT,CAA6B,OAA7B,CAAsC,KAAKH,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAtC,EACA,GAAI,KAAKG,iBAAL,CAAuB,cAAvB,CAAJ,CAA4C,KAAKC,eAAL,CAAqB,cAArB,CAC7C,CAtGK,CA4GNC,YA5GM,wBA4GS,CAEb,GAAIC,uBAAwBxC,QAAQyC,GAAR,CAAY,KAAKC,IAAjB,EAAuBC,aAAvB,CAAqC,wBAArC,EAA+DC,iBAA3F,CAEA,GAAI,CAACJ,qBAAL,CAA4B,CAE3B,KAAKK,GAAL,CAAS,iBAAT,CAA4B,KAA5B,CACA,CAHD,IAGO,CAEL,KAAKA,GAAL,CAAS,iBAAT,CAA4B,IAA5B,CACD,CACF,CAvHK,CA6HNC,eA7HM,0BA6HUrB,aA7HV,CA6HyB,CAE7B,GAAI,CAACA,aAAL,CAAoB,MAAO,MAAP,CAEpBA,cAAgBA,cAAcsB,WAAd,EAAhB,CAEA,MAAO,UAASC,IAAT,CAAe,CAEpBA,KAAOA,KAAKC,MAAL,CAAcD,KAAKC,MAAnB,CAA4BD,IAAnC,CACA,MAAOA,MAAKE,KAAL,CAAWH,WAAX,GAAyBI,OAAzB,CAAiC1B,aAAjC,EAAkD,CAAC,CAC3D,CACF,CAxIK,CA6INQ,eA7IM,0BA6IUmB,GA7IV,CA6Ie,CAEnB,GAAIC,iBAAkBrD,QAAQyC,GAAR,CAAYW,GAAZ,CAAtB,CACIE,iBAAoBD,gBAAgBE,IAAhB,CAAqBC,MAArB,CAA4B,SAACC,WAAD,CAAiB,CACnE,MAAOA,aAAYC,QAAZ,GAAyB,gBACjC,CAFuB,CADxB,CAMA,GAAI,CAACJ,iBAAiBK,MAAtB,CAA6B,CAE3B,GAAI,CAAC,KAAK1C,iBAAV,CAA6B,CAC3B,KAAK2C,cAAL,EACD,CACF,CACF,CA3JK,CAiKNC,uBAjKM,kCAiKkBC,QAjKlB,CAiK4B,CAChCA,SAAWA,SAASb,MAAT,CAAkBa,SAASb,MAA3B,CAAoCa,QAA/C,CACA,MAAQ,MAAKhD,cAAL,GAAwBgD,QAAzB,CAAqC,QAArC,CAA+C,EACvD,CApKK,CAwKNC,SAxKM,qBAwKM,CACV,KAAKlB,GAAL,CAAS,mBAAT,CAA8B,IAA9B,EACA,KAAKA,GAAL,CAAS,gBAAT,CAA2B,EAA3B,EACA,KAAKA,GAAL,CAAS,sBAAT,CAAiC,EAAjC,EACA,KAAKmB,iBAAL,EACD,CA7KK,CAkLNA,iBAlLM,6BAkLc,gBAClB,KAAKC,QAAL,CAAc,cAAd,CAA8B,UAAM,CAClClE,OAAOmE,qBAAP,CAA6B,UAAM,CACjC,GAAIC,sBAAuBnE,QAAQyC,GAAR,CAAY,MAAKC,IAAjB,EAAuBC,aAAvB,CAAqC,YAArC,CAA3B,CACIyB,uBAAyBpE,QAAQyC,GAAR,CAAY0B,oBAAZ,EAAkCxB,aAAlC,CAAgD,IAAhD,CAD7B,CAEI0B,kBAAoBD,uBAAuBE,qBAAvB,EAFxB,CAIA,MAAKzB,GAAL,CAAS,UAAT,CAAqBwB,kBAAkBE,KAAlB,CAA0B,CAA/C,CACD,CAND,CAOD,CARD,CAQE,EARF,CAUD,CA7LK,CAuMNC,iCAvMM,6CAuM8B,CAElC,GAAIC,UAAW,KAAKnD,iBAAL,EAA0B,EAAzC,CACIoD,MAAQ,KAAKC,WADjB,CAEIvD,SAAW,KAAKA,QAFpB,CAIA,GAAI,CAACqD,SAASd,MAAV,EAAoB,CAACe,KAArB,EAA8B,CAACtD,QAAnC,CAA6C,OAE7C,GAAIwD,gBAAiB,GAAI7E,QAAO8E,aAAP,CAAqBC,WAAzB,CAAqCL,QAArC,CAA+CC,KAA/C,CAArB,CAQE,GAAItD,SAAWwD,eAAeG,qBAA9B,CAAqD,CAEnD,KAAKC,kBAAL,CAAwBP,QAAxB,EACA,MACD,CAOD,GAAIrD,SAAWwD,eAAeK,wCAAf,CAA0DL,eAAeM,kBAAxF,CAA4G,CAE1G,GAAIC,mCAAoCP,eAAeQ,8BAAf,CAA8CC,MAA9C,CAAqDT,eAAeU,YAApE,CAAxC,CACA,KAAKN,kBAAL,CAAwBG,iCAAxB,EACA,MACD,CAMD,GAAI/D,SAAWwD,eAAeW,uBAA9B,CAAuD,CACrD,GAAIC,mBAAoBZ,eAAea,cAAvC,CAEA,KAAKT,kBAAL,CAAwBQ,iBAAxB,EACA,MACD,CAQD,KAAKR,kBAAL,CAAwB,KAAKU,wBAAL,CAA8BjB,QAA9B,CAAwCrD,QAAxC,CAAkDwD,cAAlD,CAAxB,CAEH,CA5PK,CAsQNc,wBAtQM,mCAsQmBC,QAtQnB,CAsQ6BvE,QAtQ7B,CAsQuCwD,cAtQvC,CAsQuD,CAE3D,GAAIgB,SAAU,CAAd,CACIC,iBAAmBjB,eAAeK,wCADtC,CAEIC,mBAAqBN,eAAeM,kBAFxC,CAGIY,eAAiBlB,eAAekB,cAHpC,CAIIC,sBAAwB,KAJ5B,CAKIC,SAAW,EALf,CAMIC,YAAc,CAAC,QAAS,KAAV,CAAiB,cAAe,IAAhC,CANlB,CAOIC,eAAiB,EAPrB,CAUA,MAAO9E,SAAW0E,eAAiBD,gBAAjB,CAAoCX,kBAAtD,CAA0E,CAGxE,GAAIU,UAAYD,SAAShC,MAAT,CAAgB,CAAhC,CAAmC,CACjCoC,sBAAwB,IAAxB,CACA,KACD,CAED,GAAII,aAAcvB,eAAewB,0BAAf,CAA0CT,SAASC,OAAT,CAA1C,CAAlB,CAEAC,kBAAoBM,WAApB,CAEAP,SACD,CAKDK,YAAYI,QAAZ,CAAuBV,SAASW,KAAT,CAAe,CAAf,CAAkBV,OAAlB,CAAvB,CAIAK,YAAYI,QAAZ,CAAqBE,OAArB,CAA6B,SAACC,KAAD,CAAW,CACpCA,MAAMC,WAAN,CAAoB,KACvB,CAFD,EAKAT,SAAaD,qBAAD,CAA0BnB,eAAe8B,aAAzC,CAAyD9B,eAAeU,YAApF,CAIAY,eAAiB,CAACD,WAAD,EAAcZ,MAAd,CAAqBT,eAAea,cAAf,CAA8Ba,KAA9B,CAAoCV,OAApC,CAA6CD,SAAShC,MAAT,CAAgB,CAA7D,CAArB,EAAsF0B,MAAtF,CAA6FW,QAA7F,CAAjB,CACA,MAAOE,eAER,CApTK,CA0TNS,qBA1TM,gCA0TgBC,KA1ThB,CA0TuB,CAC3B,MAAOA,SAAU,CAClB,CA5TK,CAwUNC,yBAxUM,oCAwUoBzD,GAxUpB,CAwUyB,CAC7B,MAAQA,KAAI0D,MAAJ,CAAWC,YAAX,GAA4B,IAA7B,CAAqC3D,IAAI0D,MAAJ,CAAWE,UAAX,CAAsBA,UAA3D,CAAwE5D,IAAI0D,MACpF,CA1UK,CA2UNG,SA3UM,oBA2UI7D,GA3UJ,CA2US,CACb,KAAK8D,qBAAL,CAA2B9D,IAAI+D,MAAJ,CAAW5D,IAAtC,CACD,CA7UK,CAmVN6D,qBAnVM,gCAmVgBC,UAnVhB,CAmV4B,CAChC,GAAI3C,OAAQ,KAAKC,WAAjB,CACI1B,OAASoE,WAAWpE,MAAX,CAAoBoE,WAAWpE,MAA/B,CAAwCoE,UADrD,CAEIC,eAAiBD,WAAWnE,KAAX,GAAqB,KAArB,CAA6B,IAA7B,CAAoC,KAFzD,CAIA,MAAQ,CAACoE,cAAF,CAAqB5C,MAAM6C,WAAN,CAAkBtE,MAAlB,CAArB,CAAiD,KACzD,CAzVK,CAkWNuE,YAlWM,uBAkWOpE,GAlWP,CAkWY,CAChB,GAAIqE,eAAgBrE,IAAIsE,KAAJ,CAAU1E,IAAV,CAAeC,MAAf,CAAwBG,IAAIsE,KAAJ,CAAU1E,IAAV,CAAeC,MAAvC,CAAgDG,IAAIsE,KAAJ,CAAU1E,IAA9E,CAGA,KAAKY,cAAL,GACA,KAAK+D,oBAAL,CAA0BF,aAA1B,CACD,CAxWK,CAkXNE,oBAlXM,+BAkXe3E,IAlXf,CAkXqB,CACzB,KAAK4E,MAAL,CAAY5E,IAAZ,EACA,KAAK6E,IAAL,CAAU,6BAAV,CAAyC7E,IAAzC,CACD,CArXK,CAyXNY,cAzXM,0BAyXW,CACb,KAAKf,GAAL,CAAS,mBAAT,CAA8B,IAA9B,EACA,KAAKA,GAAL,CAAS,sBAAT,CAAiC,EAAjC,EACA,KAAKA,GAAL,CAAS,gBAAT,CAA2B,EAA3B,EACA,GAAI,KAAKrB,UAAT,CAAqB,KAAKsG,YAAL,EACxB,CA9XK,CAmYNA,YAnYM,wBAmYS,CACb,KAAKjF,GAAL,CAAS,eAAT,CAAyB,EAAzB,CACD,CArYK,CA2YNkF,2BA3YM,sCA2YsB/E,IA3YtB,CA2Y4B,CAChC,MAAQA,MAAKyD,WAAN,CAAqB,aAArB,CAAqC,EAC7C,CA7YK,CAsZNuB,UAtZM,qBAsZK5E,GAtZL,CAsZU,CACd,GAAI6E,UAAW7E,IAAIsE,KAAJ,CAAU1E,IAAV,CAAeC,MAAf,CAAwBG,IAAIsE,KAAJ,CAAU1E,IAAV,CAAeC,MAAvC,CAAgDG,IAAIsE,KAAJ,CAAU1E,IAAzE,CACA,GAAIkF,uBAAwBD,SAAS/E,KAAT,GAAkB,KAAlB,CAA0B,IAA1B,CAAiC,KAA7D,CAGA,GAAI,KAAK3B,aAAL,EAAsB,CAAC2G,qBAA3B,CAAkD,CAEhD,KAAKtE,cAAL,GAEA,KAAK+D,oBAAL,CAA0BM,QAA1B,EACA,MACD,CAGD,GAAI,KAAKnH,cAAL,GAAwBmH,QAA5B,CAAsC,CACpC,KAAKrE,cAAL,GACA,MACD,CAOD,GAAI,KAAKwD,qBAAL,CAA2Ba,QAA3B,GAAwCC,qBAA5C,CAAmE,CACjE,GAAIxD,OAAQ,KAAKC,WAAjB,CACIwD,SAAW,CAACD,qBAAD,CAAyBxD,MAAM0D,WAAN,CAAkBH,QAAlB,CAAzB,CAAuDA,SAAS5B,QAD/E,CAKA8B,SAAWA,SAASE,GAAT,CAAa,SAACC,OAAD,CAAa,CACnCA,QAAQ7B,WAAR,CAAsB,KAAtB,CACA,GAAI6B,UAAYL,QAAhB,CAA0B,CACxBK,QAAQ7B,WAAR,CAAsB,IACvB,CACD,MAAO6B,QACR,CANU,CAAX,CAQA,GAAI,KAAK9G,UAAT,CAAqB,KAAKsG,YAAL,GAErB,KAAKjF,GAAL,CAAS,sBAAT,CAAiCsF,QAAjC,EACA,KAAKtF,GAAL,CAAS,gBAAT,CAA2BoF,QAA3B,EACA,KAAKM,uBAAL,CAA6BnF,GAA7B,EACA,KAAKP,GAAL,CAAS,mBAAT,CAA8B,KAA9B,CAIH,CAvBC,IAuBK,CACH,KAAKe,cAAL,GACA,KAAKf,GAAL,CAAS,sBAAT,CAAiC,EAAjC,EACA,KAAK8E,oBAAL,CAA0BM,QAA1B,CACD,CACF,CA1cK,CAgdNM,uBAhdM,kCAgdkBnF,GAhdlB,CAgduB,CAC3B,GAAIoF,kBAAmB,KAAK3B,yBAAL,CAA+BzD,GAA/B,CAAvB,CACIqF,WAAaD,iBAAiBlE,qBAAjB,EADjB,CAEIoE,WAAaD,WAAWE,IAF5B,CAGIC,aAAeH,WAAWI,MAH9B,CAIIC,aAAeL,WAAWM,MAJ9B,CAKIC,cAAgBjJ,OAAOkJ,OAAP,EAAkBlJ,OAAOmJ,WAL7C,CAMIC,cAAgBpJ,OAAOqJ,OAAP,EAAkBrJ,OAAOsJ,WAN7C,CAOIC,SAAWtJ,QAAQyC,GAAR,CAAY,KAAKC,IAAjB,EAAuBC,aAAvB,CAAqC,qBAArC,CAPf,CASA2G,SAASC,KAAT,CAAeC,OAAf,CAAwB,QAAWZ,aAAeO,aAAf,CAA+B,EAA1C,EAAgD,KAAhD,CAAwD,SAAxD,EAAqET,WAAaM,aAAb,CAA6B,EAAlG,EAAwG,IAEjI,CA5dK,CAkeNS,YAleM,uBAkeOzG,IAleP,CAkea,CACjB,KAAK6E,IAAL,CAAU,6BAAV,CAAyC,CAAC7E,KAAMA,IAAP,CAAa0G,SAAU,IAAvB,CAAzC,CACD,CApeK,CAweNC,eAxeM,2BAweY,CAChB,MAAO,MAAKnI,UACb,CA1eK,CA8eNoI,8BA9eM,yCA8eyB5G,IA9ezB,CA8e+B,CACnC,MAAO,MAAKzB,aAAL,EAAsByB,KAAKE,KAAL,GAAe,KAC7C,CAhfK,CAAR,EADgB,GAofV4B,YApfU,YAqfd,sBAAqC,IAAzB+E,YAAyB,2DAAX,EAAW,IAAPnF,MAAO,gDACnC,KAAKA,KAAL,CAAaA,KAAb,CACA,KAAKmF,WAAL,CAAmBA,WAAnB,CACA,KAAKxB,GAAL,CAAW,GAAIyB,QAAf,CACA,KAAKC,GAAL,CAAW,KAAKC,aAAL,EAAX,CACA,KAAKC,gBAAL,CAAsB,KAAKJ,WAA3B,EACA,MAAO,KACR,CA5fa,4EA0kBA7G,IA1kBA,CA0kBM,CAClB,GAAMkH,YAAa,KAAK7B,GAAL,CAAS8B,GAAT,CAAanH,IAAb,GAAsB,IAAzC,CACA,GAAI,CAACkH,UAAL,CAAiB,CACf,KAAK7B,GAAL,CAASxF,GAAT,CAAaG,IAAb,CAAmBA,IAAnB,CACD,CACF,CA/kBa,0DAqlBGoH,KArlBH,CAqlBU,iGACtB,kBAAiBA,KAAjB,oHAAwB,IAAfpH,KAAe,aACtB,KAAKqH,iBAAL,CAAuBrH,IAAvB,CACD,CAHqB,4LAIvB,CAzlBa,4DA+lBIA,IA/lBJ,CA+lBU,CACtB,GAAMkH,YAAa,KAAK7B,GAAL,CAAS8B,GAAT,CAAanH,IAAb,GAAsB,EAAzC,CACA,GAAG,CAACkH,WAAWI,SAAZ,EAAyBtH,KAAKE,KAAL,CAAWS,MAAX,CAAoB,EAAhD,CAAoD,CAClDuG,WAAWI,SAAX,CAA0BtH,KAAKE,KAAL,CAAWqH,MAAX,CAAkB,CAAlB,CAAoB,CAApB,CAA1B,OAAsDvH,KAAKE,KAAL,CAAWqH,MAAX,CAAkBvH,KAAKE,KAAL,CAAWS,MAAX,CAAkB,CAApC,CACvD,CAFD,IAGK,IAAG,CAACuG,WAAWI,SAAf,CAA0B,CAC7BJ,WAAWI,SAAX,CAAuBtH,KAAKE,KAC7B,CACD,KAAKmF,GAAL,CAASxF,GAAT,CAAaG,IAAb,CAAmBkH,UAAnB,EACA,MAAOA,YAAWI,SACnB,CAzmBa,4EAgnBYtH,IAhnBZ,CAgnBkB,CAC9B,GAAMkH,YAAa,KAAK7B,GAAL,CAAS8B,GAAT,CAAanH,IAAb,GAAsB,EAAzC,CACAkH,WAAWM,QAAX,CAAuBN,WAAWM,QAAX,EAAuBC,SAAS,KAAKV,GAAL,CAASW,WAAT,CAAqB1H,KAAKE,KAA1B,EAAiCqB,KAA1C,CAAgD,EAAhD,CAA9C,CACA,KAAK8D,GAAL,CAASxF,GAAT,CAAaG,IAAb,CAAmBkH,UAAnB,EACA,MAAOA,YAAWM,QACnB,CArnBa,8EA4nBaxH,IA5nBb,CA4nBmB,CAC/B,GAAMkH,YAAa,KAAK7B,GAAL,CAAS8B,GAAT,CAAanH,IAAb,GAAsB,EAAzC,CACAkH,WAAWS,SAAX,CAAwBT,WAAWS,SAAX,EAAwBF,SAAS,KAAKV,GAAL,CAASW,WAAT,CAAqBR,WAAWI,SAAhC,EAA2C/F,KAApD,CAA0D,EAA1D,CAAhD,CACA,KAAK8D,GAAL,CAASxF,GAAT,CAAaG,IAAb,CAAmBkH,UAAnB,EACA,MAAOA,YAAWS,SACnB,CAjoBa,gFA2oBchF,QA3oBd,CA2oB0C,IAAlBiF,YAAkB,2DAAN,IAAM,CACtD,GAAIjF,QAAJ,CAAc,CACZ,GAAIkF,OAAQ,CAAZ,CACIC,EAAI,CADR,CAEIC,IAAMpF,SAAShC,MAFnB,CAGIqH,iBAHJ,CAKA,IAAKF,EAAE,CAAP,CAAUA,EAAEC,GAAZ,CAAgBD,IAAIE,WAAW,IAA/B,CAAqC,CAEnC,GAAIJ,WAAJ,CAAiB,CACfI,WAAa,KAAKC,yBAAL,CAA+BtF,SAASmF,CAAT,CAA/B,CACd,CAFD,IAEO,CACLE,WAAa,KAAK5E,0BAAL,CAAgCT,SAASmF,CAAT,CAAhC,CACd,CACD,GAAI7H,QAAS0C,SAASmF,CAAT,EAAY7H,MAAZ,CAAqB0C,SAASmF,CAAT,EAAY7H,MAAjC,CAA0C0C,SAASmF,CAAT,CAAvD,CAEAD,OAASG,UAAT,CAEA,GAAIrF,SAASmF,CAAT,EAAY5H,KAAZ,GAAsB,KAAtB,EAA+B,KAAKwB,KAAL,CAAW6C,WAAX,CAAuBtE,MAAvB,CAAnC,CAAmE,CACjE4H,OAAS,EACV,CAEDA,OAAS,EAAT,CAGA,GAAIC,IAAMC,IAAI,CAAd,CAAgB,CACdF,OAAS,EACV,CACF,CAED,MAAOA,MACR,CACF,CA3qBa,qDAgrBE,CACd,GAAMK,QAASnJ,SAASoJ,aAAT,CAAuB,QAAvB,CAAf,CAEAD,OAAOnC,MAAP,CAAgB,EAAhB,CACAmC,OAAO3G,KAAP,CAAe,IAAf,CAEA,GAAMwF,KAAMmB,OAAOE,UAAP,CAAkB,IAAlB,CAAZ,CACArB,IAAIsB,IAAJ,CAAW,sBAAX,CACA,MAAOtB,IACR,CAzrBa,iDAkgBc,CAC1B,KAAKuB,uBAAL,CAA+B,KAAKA,uBAAL,EAAgC,KAAKC,2BAAL,CAAiC,KAAK1B,WAAtC,CAA/D,CACA,MAAO,MAAKyB,uBACb,CArgBa,oEAygBiC,CAC7C,MAAO,MAAKC,2BAAL,CAAiC,KAAK1B,WAAL,CAAiBvD,KAAjB,CAAuB,CAAvB,CAA0B,KAAKuD,WAAL,CAAiBlG,MAAjB,CAAwB,CAAlD,CAAjC,CAAuF,KAAvF,CACR,CA3gBa,8CA+gBW,CACvB,MAAO,MAAK4H,2BAAL,CAAiC,KAAK1B,WAAL,CAAiBvD,KAAjB,CAAuB,CAAC,CAAxB,CAAjC,CACR,CAjhBa,+CAqhBY,CACxB,MAAO,MAAKiF,2BAAL,CAAiC,KAAK1B,WAAL,CAAiBvD,KAAjB,CAAuB,CAAC,CAAxB,CAAjC,CAA6D,KAA7D,CACR,CAvhBa,wCA2hBK,CACjB,MAAO,MAAKuD,WAAL,CAAiBvD,KAAjB,CAAuB,CAAC,CAAxB,EAA2B,CAA3B,CACR,CA7hBa,yCAiiBM,CAClB,MAAO,MAAKb,cAAL,CAAoBa,KAApB,CAA0B,CAAC,CAA3B,EAA8B,CAA9B,CACR,CAniBa,0CAuiBO,iBACnB,KAAKkF,gBAAL,CAAwB,KAAKA,gBAAL,EAA0B,KAAK3B,WAAL,CAAiBxB,GAAjB,CAAqB,SAACrF,IAAD,CAAU,CAC/E,GAAIyI,SAAU,EAAd,CACAA,QAAQxI,MAAR,CAAiBD,IAAjB,CACAyI,QAAQC,WAAR,CAAsB,IAAtB,CACAD,QAAQvI,KAAR,CAAgB,OAAKmH,iBAAL,CAAuBrH,IAAvB,CAAhB,CACAyI,QAAQpF,QAAR,CAAmBrD,KAAKqD,QAAxB,CACAoF,QAAQE,YAAR,CAAuB3I,KAAK2I,YAA5B,CACAF,QAAQG,WAAR,CAAsB5I,KAAK4I,WAA3B,CACA,MAAOH,QACR,CATiD,CAAlD,CAUA,MAAO,MAAKD,gBACb,CAnjBa,0CAujBO,CACnB,MAAOf,UAAS,KAAKV,GAAL,CAASW,WAAT,CAAqB,KAArB,EAA4BnG,KAArC,CAA2C,EAA3C,CACR,CAzjBa,mDA6jBgB,CAC5B,MAAO,MAAKgH,2BAAL,CAAiC,KAAK1B,WAAtC,CAAmD,KAAnD,CACR,CA/jBa,0DAmkBuB,CACnC,MAAO,MAAKpE,cAAL,CAAoBa,KAApB,CAA0B,CAA1B,CAA6B,KAAKb,cAAL,CAAoB9B,MAApB,CAA4B,CAAzD,CACR,CArkBa,0BA0rBf,CAED5D,OAAO8E,aAAP,CAAuB,EAAvB,CACA9E,OAAO8E,aAAP,CAAqBC,WAArB,CAAmCA,WAEpC,CA/rBD,EA+rBG/E,MA/rBH","file":"px-breadcrumbs.js","sourcesContent":["(function(window) {\n  Polymer({\n\n    is: 'px-breadcrumbs',\n\n    behaviors: [\n      PxAppBehavior.AssetGraph,\n      PxAppBehavior.AssetSelectable,\n      PxAppBehavior.AssetActivatable,\n      Polymer.IronResizableBehavior\n    ],\n\n    properties: {\n      /**\n       * This property holds the dynamically generated items (full or shortened, depending on the display options) that are used for the dom repeat,\n       * which draws the main path items. It is read only and can ONLY be changed by the _rebuildBreadcrumbsDisplayOptions function to make sure it's not changed anywhere else.\n       */\n      _mainPathItems: {\n        type: Array,\n        value: function() {return [];},\n        readOnly: true\n      },\n      /**\n       * This property holds the latest clicked top path item.\n       */\n      _clickPathItem: {\n        type: Object,\n        value: function() {return {};}\n      },\n      /**\n       * This property holds all the items that are to be shown in the dropdown - these are usually siblings,\n       * but can be children if the item is an overflow item.\n       */\n      _clickedItemChildren: {\n        type: Array,\n        value: function() {return [];},\n      },\n      /**\n       * This Property is used to determine whether the dropdown is hidden or shown.\n       */\n      _isDropdownHidden: {\n        type: Boolean,\n        value: true\n      },\n      /**\n       * This property holds the currently selectedItem. We start out with no value to avoid have it run through an empty object.\n       */\n      _selectedItem: {\n        type: Object\n      },\n      /**\n       * This property holds the size of the container, against which we make all of our calculations in\n       * breadcrumbs display options.\n       * The value is auto generated either on page load, or on page resize.\n       */\n      _ulWidth: {\n        type: Number,\n        value: 0\n      },\n      /**\n       * This property holds the path to the currently selected item.\n       * This is generated dynamically by the graph whenever the _selectedItem prop changes.\n       * It is readOnly to ensure that nothing but 1 process changes it.\n       */\n      _selectedItemPath: {\n        type: Array,\n        value: function() {return [];},\n        readOnly: true\n      },\n      /**\n       * Use this mode if you want a more traditional breadcrumb path, and don't want the dropdowns to show up when a path item is clicked.\n       */\n      clickOnlyMode: {\n        type: Boolean,\n        value: false\n      },\n      filterMode: {\n        type: Boolean,\n        value: false\n      },\n      _filterString: {\n        type: String,\n        value: ''\n      },\n      _hideNoResultLi: {\n        type: Boolean,\n        value: true\n      }\n    },\n\n    listeners: {\n      'iron-resize': '_onResize',\n      'px-app-asset-selected': '_onSelect'\n    },\n    observers: [\n      '_rebuildBreadcrumbsDisplayOptions(_selectedItemPath, _ulWidth)'\n      ],\n    attached() {\n      document.addEventListener('click', this._onCaptureClick.bind(this));\n    },\n    detached() {\n      document.removeEventListener('click', this._onCaptureClick.bind(this));\n      if (this.isDebouncerActive('windowResize')) this.cancelDebouncer('windowResize');\n    },\n    /**\n     * This method is called everytime the dom-repeat in the dropdown list is rendered.\n     * it checks whether there are results (more than just the dom-repeat template, and the hidden LI),\n     * and if there are only 2, changes the _hideNoResultLI to false, showing the \"no results found\" LI\n     */\n    _onDomChange() {\n      //find the dropdown\n      var dropdownListItemCount = Polymer.dom(this.root).querySelector('#dropdownListDomRepeat').renderedItemCount;\n      //check if there are only 2 elements - which means no results\n      if (!dropdownListItemCount) {\n        //if so, show the no results li by setting this to false\n       this.set('_hideNoResultLi', false);\n      } else {\n        //we have results, make sure the \"no results\" LI is hidden\n        this.set('_hideNoResultLi', true);\n      }\n    },\n    /**\n     * This method is called by the dom-repeat filter in the dropdown - it checks the item to see if the search string\n     * is in the item - Polymer wants a function returned with a property for the item.\n     * @param {String} _filterString the typed in filter string\n     */\n    _filterSiblings(_filterString) {\n      //no value? send it back.\n      if (!_filterString) return false;\n      //convert our string to lowercase\n      _filterString = _filterString.toLowerCase();\n      //Polymer wants a function returned\n      return function(item) {\n        //make sure we are looking at the full text, not the shortened text by searching the text in the original item, if it exists.\n        item = item.source ? item.source : item;\n        return item.label.toLowerCase().indexOf(_filterString) > -1;\n      }\n    },\n    /**\n     * This method captures all clicks, and determines where they come from, and whether the dropdown needs to be closed.\n     * @param {Object} evt\n     */\n    _onCaptureClick(evt) {\n      //we look through the path to see if the click came anywhere from inside our component by filtering anything that isn't PX-BREADCRUMBS\n      var normalizedEvent = Polymer.dom(evt),\n          filteredPathList =  normalizedEvent.path.filter((evtPathItem) => {\n        return evtPathItem.nodeName === \"PX-BREADCRUMBS\";\n      });\n\n      //then we check to see if the length is empty - if it is, that means the click did NOT come from inside our component, which makes it an outside click.\n      if (!filteredPathList.length){\n        //if it's an outside click and the dropdown is open, we want to close it.\n        if (!this._isDropdownHidden) {\n          this._closeDropdown();\n        }\n      }\n    },\n    /**\n     * This method checks whether the item that was passed in is the same one that is registered as the clicked one, and\n     * if so, returns the 'opened' class.\n     * @param {Object} pathItem the item we are checking the class for\n     */\n    _calculatePathItemClass(pathItem) {\n      pathItem = pathItem.source ? pathItem.source : pathItem;\n      return (this._clickPathItem === pathItem) ? 'opened': '';\n    },\n    /**\n     * This method is called by iron-resize. It hides/clears out the dropdown menu, and gets the container size to start the display options process.\n     */\n    _onResize() {\n      this.set('_isDropdownHidden', true);\n      this.set('_clickPathItem', {});\n      this.set('_clickedItemChildren', []);\n      this._getContainerSize();\n    },\n    /**\n     * This method is called on initial page load, and on every page resize\n     * to find the width of the container after a draw. we have an observer on _ulWidth that rebuilds the display options automatically.\n     */\n    _getContainerSize() {\n      this.debounce('windowResize', () => {\n        window.requestAnimationFrame(() => {\n          var breadcrumbsContainer = Polymer.dom(this.root).querySelector('.container'),\n              breadcrumbsUlContainer = Polymer.dom(breadcrumbsContainer).querySelector('ul'),\n              bcUlContainerRect = breadcrumbsUlContainer.getBoundingClientRect();\n\n          this.set('_ulWidth', bcUlContainerRect.width + 4); //the 4 is for the padding (2px on each side) on the ul.\n        });\n      },10);\n\n    },\n    /*\n    * in this method, we decide on the display options for the breadcrumbs.\n    * we have the following options:\n    * 1. nothing needs to be shortened.\n    * 2. we can shorten all but the last one\n    * 2. we can shorten all including the last one\n    * 3. we can shorten all of them, and include the overflow at the beginning of the array. the last one is NOT shortened by default, but can be shortened as needed.\n    * @param {array} strArray an array of objects, which contains the breadcrumbs\n    */\n    _rebuildBreadcrumbsDisplayOptions() {\n\n      var itemPath = this._selectedItemPath || [],\n          graph = this._assetGraph,\n          _ulWidth = this._ulWidth;\n\n      if (!itemPath.length || !graph || !_ulWidth) return;\n\n      var breadcrumbsObj = new window.pxBreadcrumbs.Breadcrumbs(itemPath, graph);\n\n        /*\n        * option 1\n        * we check to see if the container (which is sized automatically to fill out the page)\n        * can fit all the items in the breadcrumbs.\n        * the first option is the simpliest one - everything just fits, but if it doesn't fit...\n        */\n        if (_ulWidth > breadcrumbsObj.sizeOfFullBreadcrumbs) {\n          //everything fits, no need to shorten anything\n          this._set_mainPathItems(itemPath);\n          return;\n        }\n\n        /*\n        * option 2\n        * we want to find out if the container can now fit all the\n        * shortened items + the last Item that wasn't shortened\n        */\n        if (_ulWidth > breadcrumbsObj.sizeOfAllShortenedItemsExcludingLastItem + breadcrumbsObj.sizeOfFullLastItem) {\n\n          let strArrayShortenedWithFullLastItem = breadcrumbsObj.allShortenedItemsExcludingLast.concat(breadcrumbsObj.lastItemFull);\n          this._set_mainPathItems(strArrayShortenedWithFullLastItem);\n          return;\n        }\n\n        /*\n        * option 3\n        * we check if we can fit after we've shortened all the items\n        */\n        if (_ulWidth > breadcrumbsObj.sizeOfAllShortenedItems) {\n          let strArrayShortened = breadcrumbsObj.shortenedItems;\n\n          this._set_mainPathItems(strArrayShortened);\n          return;\n        }\n\n        /*\n        * option 4\n        * we have to create an array with overflow.\n        * we only get to this if non of the if statements above are true.\n        */\n\n        this._set_mainPathItems(this._createArrayWithOverflow(itemPath, _ulWidth, breadcrumbsObj));\n\n    },\n    /*\n    * this method is called once we've established that we need to have an\n    * array with overflow.\n    * we keep removing the size of items - starting from the beginning of the array -\n    * from the total size of all the items, until we can fit everything + the last item that isn't shortened\n    * into the container.\n    * @param {Array} strArray the array that holds the breadcrumbs\n    * @param {number} _ulWidth the width of the ul container\n    */\n    _createArrayWithOverflow(strArray, _ulWidth, breadcrumbsObj) {\n\n      var pointer = 0,\n          currentAccumSize = breadcrumbsObj.sizeOfAllShortenedItemsExcludingLastItem,\n          sizeOfFullLastItem = breadcrumbsObj.sizeOfFullLastItem,\n          sizeOfEllipsis = breadcrumbsObj.sizeOfEllipsis,\n          noRoomForFullLastItem = false,\n          lastItem = {},\n          overflowObj = {\"label\": \"...\", \"hasChildren\": true},\n          slicedStrArray = [];\n\n      //keep looping until all the items fit into the container\n      while (_ulWidth < sizeOfEllipsis + currentAccumSize + sizeOfFullLastItem) {\n        //if we made it to the last item, and it's STILL can't fit, break out of the\n        // while loop, to ensure the last items doesn't go into the overflow object.\n        if (pointer === strArray.length-1) {\n          noRoomForFullLastItem = true;\n          break\n        }\n        //get the size of the item we are placing into the overflow\n        var removedSize = breadcrumbsObj._sizeOfIndividualShortItem(strArray[pointer]);\n        // subtract the size from the overall accumulated size\n        currentAccumSize -= removedSize;\n        //and make sure to manually change our pointer.\n        pointer++;\n      }\n\n\n\n      //create the overflow object, and populate its children with the shortened strings (if necessary)\n      overflowObj.children = strArray.slice(0, pointer);\n\n      // clean up - in case the user clicked on the path, there will be a highlighted property set to true.\n      // since overflow shouldn't have anything highlighted, we clear is up, just to be sure.\n      overflowObj.children.forEach((child) => {\n          child.highlighted = false;\n      });\n      //the last item is usually full size, but, if if it's just the overflow and the last item\n      // and the last item is too long, it should shortened.\n      lastItem  = (noRoomForFullLastItem) ? breadcrumbsObj.lastItemShort : breadcrumbsObj.lastItemFull;\n\n      //add the overflow obj to the beginning of the array, and follow it up with all the shortened strings,\n      //starting with the point we stopped at with the pointer, and going till the last item, which is dynamically determined.\n      slicedStrArray = [overflowObj].concat(breadcrumbsObj.shortenedItems.slice(pointer, strArray.length-1)).concat(lastItem);\n      return slicedStrArray;\n\n    },\n    /**\n     * This function is used to determine whether we are on the first Item in the array - used by a dom-if to check\n     * if we should display the right angle (we should display it on all but the first one)\n     * @param {Number} index the index of the item\n     */\n    _isNotFirstItemInData(index) {\n      return index !== 0;\n    },\n\n    /**\n     * This method is used to determine where the path click came from - we have 3 different options,\n     * 1. the text\n     * 2. the down chevron\n     * 3. The side chevron\n     * but we really want the encompossing LI, regardless of what was clicked.\n     * the two icons have a _iconsetName property that is 'fa' so we use that to determine if they were clicked,\n     * and if so, grab their parent, which is the LI.\n     * @param {*} evt the event generated by the user tap\n     */\n    _normalizePathClickTarget(evt) {\n      return (evt.target._iconsetName === 'fa') ? evt.target.parentNode.parentNode : evt.target;\n    },\n    _onSelect(evt) {\n      this._set_selectedItemPath(evt.detail.path);\n    },\n    /**\n     * This function checks whether the item in question has siblings.\n     * if the item is an overflow item, we return a false, since it's not going to be in the graph anyway.\n     * @param {*} itemInPath\n     */\n    _doesItemHaveSiblings(itemInPath) {\n      var graph = this._assetGraph,\n          source = itemInPath.source ? itemInPath.source : itemInPath,\n          isItemOverflow = itemInPath.label === '...' ? true : false;\n\n      return (!isItemOverflow)  ? graph.hasSiblings(source) : false;\n    },\n    /**\n     *\n     * we consider a dropdown tap an event that changes the path.\n     * We make sure to pass the correct item into the graph by using the source property,\n     * after we hide the dropdown and reset the last clicked item.\n     *\n     * @param {Object} evt the click event from the dropdown item clicked\n     */\n    _dropdownTap(evt) {\n      var newSelectItem = evt.model.item.source ? evt.model.item.source : evt.model.item;\n\n      //this hides the dropdown\n      this._closeDropdown();\n      this._changePathFromClick(newSelectItem);\n    },\n    /**\n     * This event is fired whenever a click occurs - from a top path item, or dropdown item -\n     * that changes the context. The new context is attached as 'item'\n     * @event px-breadcrumbs-item-changed\n     */\n    /**\n     * This method sets the _selectedItem to the item that was clicked - whether from the main path items, or the dropdown items\n     * this is the only place we change _selectedItem on click.\n     */\n    _changePathFromClick(item) {\n      this.select(item);\n      this.fire('px-breadcrumbs-item-changed', item);\n    },\n    /**\n     * This method is called every time we want the dropdown closed.\n     */\n    _closeDropdown() {\n        this.set('_isDropdownHidden', true);\n        this.set('_clickedItemChildren', []);\n        this.set('_clickPathItem', {});\n        if (this.filterMode) this._resetFilter();\n    },\n    /**\n     * this sets the value of _filterStrin to an empty string, emptying out the filter field.\n     * needed for the dropdown is closed, or moves to another path item.\n     */\n    _resetFilter() {\n      this.set('_filterString','');\n    },\n    /**\n     * The dropdown list contains the item that's in the top path - we want to highlight that item by returning the\n     * highlighted class on the ones where highlighted is true.\n     * @param {Object} item\n     */\n    _calculateDropdownItemClass(item) {\n      return (item.highlighted) ? 'highlighted' : '';\n    },\n    /*\n    * on tap, we need to find out if the clicked item is the same as before.\n    * if it is, we empty our the dropdown, hide it, and clear the _clickPathItem (the last item clicked).\n    * if it is not the same item that was previously clicked, we save the new clicked item into _clickPathItem\n    * set the siblings according to the item, show the dropdown and adjust the positioning for it.\n    * sometimes, a top path item has no siblings, at which point we treat the click like a dropdown click - which is to say\n    * we change the path accordingly.\n    */\n    _onPathTap(evt) {\n      var dataItem = evt.model.item.source ? evt.model.item.source : evt.model.item;\n      var isClickedItemOverflow = dataItem.label ==='...' ? true : false;\n\n      //if the click only mode is on, just change the path\n      if (this.clickOnlyMode && !isClickedItemOverflow) {\n        //in case the overflow menu is open\n        this._closeDropdown();\n        //and change our path.\n        this._changePathFromClick(dataItem);\n        return;\n      }\n\n      //if the item that is clicked is the open option, hide the dropdown, and reset the _clickPathItem object.\n      if (this._clickPathItem === dataItem) {\n        this._closeDropdown();\n        return;\n      }\n\n      // it's important to check if the clicked item is an overflow item, since it's the only one\n      // that isn't in our graph - if we send it into getSiblings, the graph won't know what to do with it.\n      // instead, if it IS an overflow item, we set the siblings as the children of dataItem.\n\n\n      if (this._doesItemHaveSiblings(dataItem) || isClickedItemOverflow) {\n        var graph = this._assetGraph,\n            siblings = !isClickedItemOverflow ? graph.getSiblings(dataItem) : dataItem.children;\n\n        //if the item is the same as the dataItem, we want to highlight it.\n        // we also want to make sure any previous highlighting is removed.\n        siblings = siblings.map((sibling) => {\n          sibling.highlighted = false;\n          if (sibling === dataItem) {\n            sibling.highlighted = true;\n          }\n          return sibling;\n        });\n\n        if (this.filterMode) this._resetFilter();\n\n        this.set('_clickedItemChildren', siblings);\n        this.set('_clickPathItem', dataItem);\n        this._changeDropdownPosition(evt);\n        this.set('_isDropdownHidden', false);\n\n      // the clicked item has no siblings - we reset the contents of the dropdown\n      // and change the path accordingly.\n    } else {\n        this._closeDropdown(); //just in case a dropdown is open.\n        this.set('_clickedItemChildren', []);\n        this._changePathFromClick(dataItem);\n      }\n    },\n    /**\n     * the dropdown is dynamically positioned - we find out the top and left of the clicked item,\n     * and position the dropdown accordingly.\n     * @param {Object} positioning an object which holds the new positioning for the dropdown\n     */\n    _changeDropdownPosition(evt) {\n      var normalizedTarget = this._normalizePathClickTarget(evt),\n          targetRect = normalizedTarget.getBoundingClientRect(),\n          targetLeft = targetRect.left,\n          targetBottom = targetRect.bottom,\n          targetHeight = targetRect.height,\n          windowScrollX = window.scrollX || window.pageXOffset,\n          windowScrollY = window.scrollY || window.pageYOffset,\n          dropdown = Polymer.dom(this.root).querySelector('.breadCrumbDropdown');\n      //IE11 doesn't like style.left or style.top, so i'm using cssText, which works everywhere. Thanks IE.\n      dropdown.style.cssText =\"top:\" +  (targetBottom + windowScrollY + 12) + \"px;\" + \" left: \" + (targetLeft + windowScrollX - 10) + \"px\"; //remember to add the padding to push it down, and rememeber to subtract the padding from the left\n\n    },\n    /**\n     * This method dispatches a custom event ('px-breadcrumbs-item-clicked') that has the item attached to it.\n     * the 'composed: true' property makes it so the event passes through shadow dom boundaries.\n     * @param {*} item the item that was clicked on.\n     */\n    _notifyClick(item) {\n      this.fire('px-breadcrumbs-item-clicked', {item: item, composed: true});\n    },\n    /**\n     * This method returns the status of the filter-mode\n     */\n    _isFilteredMode() {\n      return this.filterMode;\n    },\n    /**\n     * This method returns the status of the click-only-mode\n     */\n    _isClickOnlyModeAndNotOverflow(item) {\n      return this.clickOnlyMode && item.label !== \"...\";\n    }\n  });\n\n  class Breadcrumbs {\n    constructor(breadcrumbs = [], graph) {\n      this.graph = graph;\n      this.breadcrumbs = breadcrumbs;\n      this.map = new WeakMap();\n      this.ctx = this._createCanvas();\n      this._preShortenItems(this.breadcrumbs);\n      return this;\n    }\n\n    /**\n     * a getter that returns the size of the breadcrumb items - unshortened.\n     * it checks to see if it has a value, and if so, returns the cached one, so we don't have to calculate the value again.\n     */\n    get sizeOfFullBreadcrumbs() {\n      this.__sizeOfFullBreadcrumbs = this.__sizeOfFullBreadcrumbs || this._calculateSizeOfBreadcrumbs(this.breadcrumbs);\n      return this.__sizeOfFullBreadcrumbs;\n    }\n    /**\n     * a getter that returns the short size of the breadcrumb items excluding the last item.\n     */\n    get sizeOfAllShortenedItemsExcludingLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(0, this.breadcrumbs.length-1), false);\n    }\n    /**\n     * a getter that returns the size of the full last item\n     */\n    get sizeOfFullLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(-1));\n    }\n    /**\n     * a getter that returns the size of the short last item\n     */\n    get sizeOfShortLastItem() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs.slice(-1), false);\n    }\n    /**\n     * a getter that returns the last item in the breadcrumb array.\n     */\n    get lastItemFull() {\n      return this.breadcrumbs.slice(-1)[0];\n    }\n    /**\n     * a getter that returns the short version of the last item in the breadcrumbs array.\n     */\n    get lastItemShort() {\n      return this.shortenedItems.slice(-1)[0];\n    }\n    /**\n     * a getter that returns an array of all the shortened items in the breadcrumbs array\n     */\n    get shortenedItems() {\n      this.__shortenedItems = this.__shortenedItems ||  this.breadcrumbs.map((item) => {\n        var wrapper = {};\n        wrapper.source = item;\n        wrapper.isTruncated = true;\n        wrapper.label = this._getShortenedText(item);\n        wrapper.children = item.children;\n        wrapper.selectedItem = item.selectedItem;\n        wrapper.hasChildren = item.hasChildren;\n        return wrapper;\n      });\n      return this.__shortenedItems;\n    }\n    /**\n     * a getter that returns the size - in pixels - of the overflow ellipsis\n     */\n    get sizeOfEllipsis() {\n      return parseInt(this.ctx.measureText('...').width,10)\n    }\n    /**\n     * a getter that returns the size - in pixels - of all the shortened breadcrumbs items\n     */\n    get sizeOfAllShortenedItems() {\n      return this._calculateSizeOfBreadcrumbs(this.breadcrumbs, false);\n    }\n    /**\n     * a getter that returns the size - in pixels - of all the shortened breadcrumbs items excluding the last item\n     */\n    get allShortenedItemsExcludingLast() {\n      return this.shortenedItems.slice(0, this.shortenedItems.length -1);\n    }\n    /**\n     * This method adds the item that is passed in to the weakMap if it is not already there.\n     * @param {Object} item an item from the breadcrumbs array that is being added to the weakMap\n     */\n    _addToWeakMap(item) {\n      const cachedItem = this.map.get(item) || null;\n      if (!cachedItem) {\n        this.map.set(item, item);\n      }\n    }\n    /**\n     * This method is called when the class is instantiated. it loops through all the passed in items, and calls the _getShortenedText method on\n     * each item.\n     * @param {Array} items an array of breadcrumbs items\n     */\n    _preShortenItems(items) {\n      for (let item of items) {\n        this._getShortenedText(item);\n      }\n    }\n    /**\n     * This method returns the shortened version of the text in the item that is passed in, as well as add it into the map.\n     * it checks for a cached version before it sets it.\n     * @param {Object} item a breadcrumb Item\n     */\n    _getShortenedText(item) {\n      const cachedItem = this.map.get(item) || {};\n      if(!cachedItem.shortText && item.label.length > 13) {\n        cachedItem.shortText = `${item.label.substr(0,6)}...${item.label.substr(item.label.length-6)}`;\n      }\n      else if(!cachedItem.shortText) {\n        cachedItem.shortText = item.label;\n      }\n      this.map.set(item, cachedItem);\n      return cachedItem.shortText;\n    }\n    /**\n     *\n     * This method returns the size - in pixels - of the full size of the text in the passed in item, as well as add that info into the map.\n     * it checks for a cached version before setting this value\n     * @param {Object} item a breadcrumb Item\n     */\n    _sizeOfIndividualFullItem(item) {\n      const cachedItem = this.map.get(item) || {};\n      cachedItem.fullSize = (cachedItem.fullSize || parseInt(this.ctx.measureText(item.label).width,10));\n      this.map.set(item, cachedItem);\n      return cachedItem.fullSize;\n    }\n    /**\n     *\n     * This method returns the size - in pixels - of the short size of the text in the passed in item, as well as add that info into the map.\n     * it checks for a cached version before setting this value\n     * @param {Object} item a breadcrumb Item\n     */\n    _sizeOfIndividualShortItem(item) {\n      const cachedItem = this.map.get(item) || {};\n      cachedItem.shortSize = (cachedItem.shortSize || parseInt(this.ctx.measureText(cachedItem.shortText).width,10));\n      this.map.set(item, cachedItem);\n      return cachedItem.shortSize;\n    }\n    /**\n     *\n     * This method loops through the passed in array, and gets the size - in pixels - of all the items\n     * the size can be determined in either short or full text.\n     * it takes into account the size of the iron icons, as well as padding on each item, and padding on the container.\n     *\n     * @param {Array} strArray an array of the items we need the size calculated on.\n     * @param {Boolean} useFullSize this determines whether the full size is measured, or the short size.\n     */\n    _calculateSizeOfBreadcrumbs(strArray, useFullSize=true) {\n      if (strArray) {\n        let accum = 0,\n            i = 0,\n            len = strArray.length,\n            sizeOfItem;\n        //run through all the items, and get the sizes.\n        for (i=0; i<len;i++,sizeOfItem=null) {\n\n          if (useFullSize) {\n            sizeOfItem = this._sizeOfIndividualFullItem(strArray[i]);\n          } else {\n            sizeOfItem = this._sizeOfIndividualShortItem(strArray[i]);\n          }\n          var source = strArray[i].source ? strArray[i].source : strArray[i];\n          //add the size of the of the item into our accumulator\n          accum += sizeOfItem;\n          //if the item has siblings, we need to add the size of the down chevron.\n          if (strArray[i].label !== \"...\" && this.graph.hasSiblings(source)) {\n            accum += 16;\n          }\n          //padding on each item (10 on each side)\n          accum += 20;\n\n          //right angle arrow - the last item doesn't get a right angle.\n          if (i !== len-1){\n            accum += 15;\n          }\n        }\n\n        return accum;\n      }\n    }\n    /**\n     * This method creates/returns the canvas that we will use to measure the size of the text.\n     * we also set the font and font size.\n     */\n    _createCanvas() {\n      const canvas = document.createElement('canvas');\n\n      canvas.height = 20;\n      canvas.width = 9999;\n\n      const ctx = canvas.getContext('2d');\n      ctx.font = \"15px GE Inspira Sans\";\n      return ctx;\n    }\n  };\n\n  window.pxBreadcrumbs = {};\n  window.pxBreadcrumbs.Breadcrumbs = Breadcrumbs;\n\n})(window);\n"]}