sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester@^5.0.0
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
env:
  global:
  - secure: eFae9W3K3qchTvEsb2Z59qJ0Yse/T4IvblTF3oVWcieQOY3ctFJUEXq8fOOnXWsiOlFsc0QEQo+a9DeslN+mHHi25KLqC9+fRS4AiLynDz+mpH1tCfd4svvt2G/4pUSloD2B2KmXUvGfl9hYiWZcWRRc3sJC7Xho3huh/hW4a2LGwgQLyFoR620lqVHuV4jbUDFTCU7tuuu1bGcYDPfDC9Ju5nJeDkuIbc6dQsf0UE0gI5+fSilNn29U9TaH4DH1fDps0q9QB5TkuQBvCkD9lX+MCatgiSNT6HS/hWG46Z0DUyT2uvbIz/M8mSx0igUGbvYgxdmcH08GXCCCB3snMWIGJ/6CeUXvWXhvgteWv4mzUIOw1gU53jSB4HujyV5tCDn0Jo41tIWYTQSz35ZYqrjg5lfb6zB3jkNXvFPjrlEci/Xgqi0xPxZI+yOdHhGNeIM7pkjdElkW6i1Ipzw+vPowivDhrkyl6JOkQ1tBTc2qliOsFhxg7XXJEbast+jv36YlCaTNBG8Nmy8qX+9gkgT+7wNMfQPweGmNJCyFULvXBOom0UFAQqtLwHkKVXrNYrXQM5OLb6C8iC3NQ3ckPiHUNH5Amz4oEN3dhFC6/4KJDeKHn0f0pY4hX+Yh2TOrxoF0siFMt5fSeCp061602kR0DuwQm5AlBToPbQTZt7Y=

after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
