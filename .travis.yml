sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester@^5.0.0
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
env:
  global:
  - secure: pyVfMDDl0NwNr7XDUahxqg7A9IR1838Kx0yiLljsul3+b6XQP4ZTICDykelaLyLmBg7UskW2x8a2bJ/ktm8r2bM0dC4gyD5e5SrGzmp31lQUBRtEmt7rg2YoC81+oYn0RbdY1jEdTNYiRlw4NbPuekeaeNf4nm3CaK2pr9AGPWV9KRhBOeUqxdHhnniwYrsSzABk0gO/VRU6xOzlWQMKLBhxX8Oy3EfL/FEXZ8U3HmlioRe1kBg22k9rvymBkcfkEDnnTYPm1HV9KwrFprjlq1PZ/LBEvw61xuZOEdWGaOxLGeTGgMhQN/w6xk6NSLNayIg6++htatGzABW/ep8b0RWxvkqPzfz0qp74mmJAWS6u0+msWWJpm5K9xHIpYZRZZrrRadrgAU/RZR8n9T+Te2gqp1s3rus2goRDCRA5/zccf4xTyGo3BiB6B5W5hFT1tkPUbkuGeqjr7uQdFGJYhSXuh/Z8DrmmnQGH84hBoa+isOnJ0VtHthWpvBKrbdFXfXB6/BjbAuJjmhv9YqW9VBmuXLqGa3odVhjLnGu93fgGcm4/aEqE1eKvEWYBX5mL/AJm353ErCWzSJjRx36i5wd42RDHFqOyKsQYgEc4rARZRAaCELCf32Inzih/WiQiQvm+dZTwokfuNs9f+kUgvl4qe96a6O7f9atkkfyQGII=

after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
