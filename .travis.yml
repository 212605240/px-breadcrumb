sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester@^5.0.0
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
env:
  global:
  - secure: kAHduxCFhVB2eNKQNzteykn7xDKAUhq2OWGGVGPB6kqlUmMqc1LJfW+gc4tzAxdiudKdYVPfy5G/U/FeHp8zbOLdrVkXYrSEt0MOGwPsyK7Ive4f9qxZBnNvMeTy9zz9bgVce89AOT/kJecDk+KZ0zKUkCSsPMxvkTxg1fw8uKuLMm6SK7N9tHosT7yHzXKpygKTnTdfoBojoi9zByVRcU8d2PLzIU6v9rTPElZAfceOYCm5aayRpQIemYxuC3di9qsNePK6Ga7lCXfaG6mVlyBeLQq+Lduq9bkNehR24nfwk/XvystAMEcUd59cATjPPQrSUbe24CjBcLQ4r+M4mlNtdy6CwQWhU63IHkh7+dITEseOwJ7szhwdxuW10adGO0x0Pn3aSj8bLcnLXhDNhMxvUtMw/euiRHvQV9ajo78MzhhtEDkaJ5bHPJpHJBCNvLtRmFCavQXpMZ0XjTkM0FMibalx0u5ikl0JV/7jAYFf3Kzo1QTFNvPluHKOuuCjW2SKyO2xO+gMK9y0HmqOuN69WF3uz8DHYQ4yK49l9ZlDKYp7MLW1gO4MZCFFniqKH+mfmrTvo/Zp80PY09E+TkjMbciUXUH0zxEsJ1z3VRYTrFUb0Hu9rybsE2/m3j3nmFq1BOLIK4oGgbLTWLmF9Vui6SO2hw4+9t9NwomGqvU=
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
